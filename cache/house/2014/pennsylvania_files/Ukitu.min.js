(function(e,t,n){function rt(){var e=function(){},t=function(t,n,r){var i;return n&&n.hasOwnProperty("constructor")?i=n.constructor:i=function(){return t.apply(this,arguments)},f(i,t),e.prototype=t.prototype,i.prototype=new e,n&&f(i.prototype,n),r&&f(i,r),i.prototype.constructor=i,i.__super__=t.prototype,i};return function(e,n){var r=t(this,e,n);return r.extend=rt(),r}}var r=e.FLITE,s=e.F,o=r._,u=o.contains,a=o.each,f=o.extend,c=o.filter,h=o.find,p=o.keys,d=o.values,v=o.map,m=r.Metrics,g=s.MetricsConstants,y=r.URLFactory,b=e.navigator.userAgent,w=o.is&&o.is.browser||{},E=o.is&&o.is.platform||{},S=new s.ScriptHelper(t.getElementsByTagName("body")[0]),x="wbx_thumb",T=1e3/30,N=["x","y","width","height","alpha","rotation","scale","blur","brightness","contrast","grayscale","huerotate","invert","saturate","sepia"],C=["backgroundColor","borderColor","borderThickness","cornerRadius"],k={borderThickness:"borderWidth",cornerRadius:"borderRadius"},L={b:"boolean",f:"function",n:"number",o:"object",s:"string",u:"undefined"},A={h:"hidden",v:"visible",a:"auto",s:"scroll"},O={x:0,y:0,width:100,height:100,scale:1,rotation:0,alpha:1},M="a440818a-3051-4e9c-b807-848028ad3b17";e.bind=e.addEventListener,e.unbind=e.removeEventListener;var _=o.getExpandableWindow(),D=_.setInterval,P=_.setTimeout,H=[],B=[],j=function(e,t){return function(n,r){var i=Array.prototype.slice.call(arguments,2),s=e(function(){try{n.apply(this,i)}catch(e){}},r);return t.push(s),s}};e.setInterval=j(D,H),e.setTimeout=j(P,B),e.clearInterval=_.clearInterval,e.clearTimeout=_.clearTimeout;var F=function(){a(H,function(e){_.clearInterval(e)}),a(B,function(e){_.clearTimeout(e)})},I={editor:!1,studio:!1,mraid:!1,vpaid:!1,location:m&&m.getWindowLocation&&m.getWindowLocation()||e.location,mobile:function(){return E.ios||E.android}(),retina:e.devicePixelRatio>1,touch:"ontouchstart"in e,touchPreview:!1,prefix:function(){var e=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,n="",r=t.getElementsByTagName("script")[0].style;for(var i in r)if(e.test(i)){n=i.match(e)[0];break}return n||"WebkitOpacity"in r&&(n="Webkit"),n||"KhtmlOpacity"in r&&(n="Khtml"),n.toLowerCase()}(),secure:o&&o.is&&o.is.secureLocation&&o.is.secureLocation(),coppa:!1,screenshot:!1,nativeScroll:E.android};I.stylePrefix=I.prefix?["-",I.prefix,"-"].join(""):"";var q=function(e){return e&&e.nodeType&&e.nodeType===1},R=function(e){return e&&e.nodeName&&e.nodeName==="IFRAME"},U=function(e,t,n,r,i,s){return n=n||t,r=r||"%v",function(o){return L.u!==typeof o&&e[t]!==o&&(o=parseFloat(o),e[t]=o,e.css(n,r.replace(/%v/gi,o)),u(["_width","_height"],t)&&e.trigger(vt.events.RESIZE)),e[t]||i&&i[s]||parseInt(e.css(n)||0,10)}},z=function(e,t){return function(n){if(L.u!==typeof n){e[t]=n;var r=Math.floor(parseFloat(e._x)),i=Math.floor(parseFloat(e._offsetX)),s=Math.floor(parseFloat(e._y)),o=Math.floor(parseFloat(e._offsetY)),u=parseFloat(e._rotation),a=parseFloat(e._scale),f="",l="",c="rotate("+u+"deg)";I.editor&&!I.retina||w.chrome&&w.version===32||!E.ios&&!E.android&&!w.webkit&&!w.firefox?(f="translate("+(r+i)+"px, "+(s+o)+"px)",l="scale("+a+","+a+")"):(f="translate3d("+(r+i)+"px, "+(s+o)+"px, 0px)",l="scale3d("+a+","+a+",1)"),e.css("transform",[f,c,l].join(" ").trim());if(w.msie&&w.version<=9){var h=e.dom.className;e.dom.className="",e.dom.className=h}}return e[t]}},W=function(e,t){t=L.u===typeof t?1:t;var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n||(n=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e),n&&(n[1]=""+n[1]+n[1],n[2]=""+n[2]+n[2],n[3]=""+n[3]+n[3])),n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),t]:null},X=function(e){return e&&(e=e.trim(),e.indexOf("#")===-1&&(e=["#",e].join(""))),e},V=function(e){return e&&(L.b===typeof e||L.s===typeof e&&e.toLowerCase()==="true"||!isNaN(parseFloat(e))&&parseFloat(e)!==0)},$=function(e,t,n,r){return r=L.u===typeof r?!0:r,r?e>=t&&e<=n:e>t&&e<n},J=function(e,t){return L.f===typeof t&&e instanceof t},K=function(e,t){return L.f!==typeof t?t:o.bind(t,e)},Q=function(e){var t={},n=e&&e.configParams;if(n){var r=p(n);a(r,function(e){t[e]=n[e].valueMap||n[e].value})}return t},G=function(e,t){return t=t.replace(/\\\./g,"#DELIM#"),t=t.split("."),a(t,function(t){e&&(t=t.replace(/\#DELIM\#/,"."),e=e[t])},this),e},Y=function(e,n){var r=t.createElement("a");r.setAttribute("href",e),r.setAttribute("target",n);var i;t.createEvent?(i=t.createEvent("MouseEvents"),i.initEvent("click",!0,!0),i.eventName="click",w.msie&&!i.isTrusted?location.href=e:r.dispatchEvent(i)):t.createEventObject&&(i=t.createEventObject(),r.fireEvent("onclick",i))},Z=function(e){var t=e;try{t=decodeURIComponent(e)}catch(n){}return!t.match(/^tel\:/i)&&!t.match(/^mailto\:/i)&&!t.match(/^sms\:/i)&&!t.match(/\/\//i)&&!t.match(/https?\:/i)&&(e=["http://",e].join("")),e},et=function(e){var t=e.split("-");return e=t[0],t=v(t.splice(1),function(e){return e.charAt(0).toUpperCase()+e.substr(1)}),e+t.join("")},tt=function(e,n){var r=t.elementFromPoint(e,n);if(r){var i=Rt.containers[r.id];while(!i&&r.parentNode)r=r.parentNode,i=Rt.containers[r.id];return i}},nt={EVENTS:{MESSAGE:"message"},eventListeners:{},bind:function(t,n,r){if(!this.EVENTS.hasOwnProperty(t.toUpperCase()))return;this.eventListeners[t]||(this.eventListeners[t]={},e.bind(t,this.windowEvent_RECEIVED)),this.eventListeners[t][r]||(this.eventListeners[t][r]=[]),this.eventListeners[t][r].push(n)},unbind:function(t,n,r){if(!this.eventListeners[t]||!this.eventListeners[t][r]||!u(this.eventListeners[t][r],n))return;this.eventListeners[t][r].splice(this.eventListeners[t][r].indexOf(n),1),this.eventListeners[t][r].length===0&&(delete this.eventListeners[t][r],o.keys(this.eventListeners[t]).length||(delete this.eventListeners[t],e.unbind(t,this.windowEvent_RECEIVED)))},windowEvent_RECEIVED:function(e){var t=JSON.parse(e.data).componentKey;if(!this.eventListeners[e.type][t])return;this.obscureWindowObject(e),a(this.eventListeners[e.type][t],function(t){t(e)},this)},obscureWindowObject:function(e){delete e.source,delete e.srcElement,delete e.target,delete e.currentTarget}};nt.windowEvent_RECEIVED=K(nt,nt.windowEvent_RECEIVED);var it=function(){};it.extend=rt();var st=it.extend({element:null,style:null,_filter:null,constructor:function(e){this.element=e,this.style=e&&e.style,this._filter={}},setStyle:function(e,t){if(this.style)if(e in st.fn)st.fn[e].set.call(this,t);else if(e in this.style)this.style[e]=t,this.style[[I.stylePrefix,e].join("")]=t;else if("setProperty"in this.style){try{this.style.setProperty(e,t)}catch(n){}if(I.stylePrefix)try{this.style.setProperty([I.stylePrefix,e].join(""),t)}catch(n){}}},getStyle:function(t){var n="";this.style&&(t in st.fn?n=st.fn[t].get.call(this):t in this.style?n=this.style[t]:"getPropertyValue"in this.style&&(n=this.style.getPropertyValue(t)||this.style.getPropertyValue([I.stylePrefix,t].join(""))||""));if(L.u===typeof n){var r=e.getComputedStyle(this.element.dom);n=r&&r[t]||n}return n},hasStyle:function(e){return this.style&&(e in st.fn||et(e)in this.style||et([I.stylePrefix,e].join(""))in this.style||et([I.prefix,e].join("-"))in this.style)},buildFilterValue:function(){var e=[];return a(this._filter,function(t,n){e.push(n,"(",t,") ")}),e.join("").trim()},determineGradientAngle:function(e){var t="";return $(e,0,44,!0)||e===360?t="0% 50%, 100% 50%":$(e,45,89,!0)?t="0% 100%, 100% 0%":$(e,90,134)?t="50% 100%, 50% 0%":$(e,135,179)?t="100% 100%, 0% 0%":$(e,180,224)?t="100% 50%, 0% 50%":$(e,225,269)?t="100% 0%, 0% 100%":$(e,270,314)?t="50% 0%, 50% 100%":$(e,315,359)&&(t="0% 0%, 100% 100%"),t},_createBlurSVG:function(e){if(!this._svgBlur){var n=t.createElement("svg");n.id="svgBlur",t.body.appendChild(n),this._svgBlur=n}this._svgBlur.innerHTML=['<svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="0" width="0">',"<defs>",'<filter id="svgBlurFilter" x="0" y="0">','<feGaussianBlur stdDeviation="'+e+'" />',"</filter>","</defs>","</svg>"].join("")}},{fn:{gradient:{set:function(e){if(e===""||e==="none")w.msie&&w.version<=9?this.style.removeProperty("background-color"):this.style.removeProperty("background-image");else{var t=e.type&&e.type.toLowerCase()||"linear",n=e.angle||0,r=e.position||"50% 50%",i=e.from||"#FFF",s=e.to||"#000",o="",u="",a=I.stylePrefix;w.msie&&w.version<=9?this.setStyle("background-color",i):(w.msie&&(a="",n=90-n),o=a+t+"-gradient("+(t==="linear"?n+"deg":r)+", "+i+", "+s+")",E.android&&(u=t==="linear"?this.determineGradientAngle(n):r+", 0, "+r+", "+Math.max(this.element.width(),this.element.height()),o=a+"gradient("+t+","+u+", from("+i+"), to("+s+"))"),this.setStyle("background-image",o),this.setStyle("background-size","100%"))}},get:function(){return w.msie&&w.version<=9?this.getStyle("background-color"):this.getStyle("background-image")}},shadow:{set:function(e){(!w.msie||w.msie&&w.version>=10)&&this.setStyle("text-shadow",e.horizontal+" "+e.vertical+" "+e.radius+" "+e.color)},get:function(){return!w.msie||w.msie&&w.version>=10?this.getStyle("text-shadow"):""}},alpha:{set:function(e){w.msie&&w.version<=8?(this._filter.alpha="opacity="+parseFloat(e)*100,this.setStyle("filter",this.buildFilterValue())):this.setStyle("opacity",e)},get:function(){return w.msie&&w.version<=8?parseInt(this._filter.alpha||100,10)/100:this.getStyle("opacity")}},blur:{set:function(e){w.msie&&w.version<=9?(this._filter.blur="add=0,direction=270,strength="+e,this.setStyle("filter",this.buildFilterValue())):w.gecko&&!(w.firefox&&w.version>34)||w.msie&&w.version==10?(this._createBlurSVG(e),this.setStyle("filter","url(#svgBlurFilter)")):(this._filter.blur=e+"px",this.setStyle("filter",this.buildFilterValue()))},get:function(){var e;return w.msie&&w.version<=9?e=this._filter.blur&&this._filter.blur.split(",")[2].substr(9):w.gecko&&!(w.firefox&&w.version>34)||w.msie&&w.version==10?e=this._svgElement&&this._svgElement.getElementsByTagName("feGaussianBlur")[0].getAttribute("stdDeviation"):e=parseFloat(this._filter.blur||0),e||0}},brightness:{set:function(e){this._filter.brightness=e,this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(this._filter.brightness||1)}},contrast:{set:function(e){this._filter.contrast=e,this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(this._filter.contrast||1)}},grayscale:{set:function(e){this._filter.grayscale=e,this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(this._filter.grayscale||0)}},huerotate:{set:function(e){this._filter["hue-rotate"]=e+"deg",this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(parseInt(this._filter["hue-rotate"]||0,10))}},invert:{set:function(e){this._filter.invert=e,this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(this._filter.invert||0)}},saturate:{set:function(e){this._filter.saturate=e,this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(this._filter.saturate||1)}},sepia:{set:function(e){this._filter.sepia=e,this.setStyle(I.stylePrefix+"filter",this.buildFilterValue())},get:function(){return parseFloat(this._filter.sepia||0)}},borderRadius:{set:function(e){this.setStyle("border-radius",e),parseFloat(e)>0&&(w.safari?this.setStyle("mask-image","-webkit-linear-gradient(black, black)"):this.setStyle("mask-image",""))},get:function(){return parseFloat(this.getStyle("border-radius"))}}}}),ot=function(){var n={swipe:!0,swipe_time:400,swipe_min_distance:20,drag:!0,drag_vertical:!0,drag_horizontal:!0,drag_min_distance:5,pinch:!0,pinch_min_dist:20,pinch_time:200,zoom:!0,zoom_min_dist:20,zoom_time:200,transform:!0,scale_treshold:.1,rotation_treshold:15,tap:!0,tap_double:!0,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:!1,hold_timeout:500,click:!0,mouseup:!0,mousedown:!0,mouseover:!0,mousemove:!0,mouseout:!0,mouseleave:!0,mouseenter:!0},r={"user-select":"none","touch-callout":"none","user-drag":"none","tap-highlight-color":"rgba(0,0,0,0)"},i,s,u,l,c,h,p,d,v,m,g,y,b,w,S,x,T,N,C=function(e){return{originalEvent:e,mode:u,position:g,direction:y,distance:b,distanceX:w,distanceY:S,angle:x,scale:T,rotation:N}},k=function(){i=null,l=c=h=p=d=v=!1,m&&(m.cancel(),m=null)},L=function(e,t){if(t.hold&&!p)return p=!0,new ut(ot.events.HOLD,C(e),e,t.hold_timeout)},A=function(e,t){if(t.transform&&R(e)>=2){var n=h?ot.events.TRANSFORM:ot.events.TRANSFORM_START;return h=!0,e.preventDefault(),new ut(n,C(e),e)}},O=function(e,t){if(t.drag&&b>t.drag_min_distance){var n=c?ot.events.DRAG:ot.events.DRAG_START;return c=!0,new ut(n,C(e),e)}},M=function(e,t){var n=s.time-i.time,r=null;T<1?(t.pinch&&!d&&Math.abs(s.spread-i.spread)>=t.pinch_min_dist&&t.pinch_time>n&&(d=!0,r=ot.events.PINCH),v=!1):T>1&&(t.zoom&&!v&&Math.abs(s.spread-i.spread)>=t.zoom_min_dist&&t.zoom_time>n&&(v=!0,r=ot.events.ZOOM),d=!1);if(r)return new ut(r,C(e),e)},_=function(e,t){if(t.swipe){var n=s.time-i.time;if(t.swipe_time>n&&b>t.swipe_min_distance)return new ut(ot.events.SWIPE,C(e),e)}},D=function(e,t){if(t.tap){var n=s.time-i.time;if(!t.hold||n<t.hold_timeout)return new ut(ot.events.TAP,C(e),e)}},P=function(e){var t=j(e),n=F(t),r=(new Date).getTime();u=Object.prototype.toString.call(e).indexOf("Touch")>-1?"touch":"mouse";if(!i||!l)i={event:e,positions:t,spread:n,time:r};i.spread||(i.spread=n),s={event:e,positions:t,spread:n,time:r};var o=i.positions[0],a=s.positions[0];g=t.length>0?t:g,o&&a&&(x=U(o,a),y=z(x),b=F([o,a]),w=a.x-o.x,S=a.y-o.y),R(e)>=2&&t&&(T=t.length>=2?W(i.spread,s.spread):1,N=t.length>=2?X(i.positions,s.positions):0),ot.position=g&&g[0],ot.instance&&ot.instance.view&&(ot.instance.view.clientX=ot.position.x,ot.instance.view.clientY=ot.position.y)},H=function(t,r,i){t=t||e.event,r=r||n;var s=[];P(t);var o=t.type.toLowerCase();o.indexOf("mouse")===-1&&s.push(new ut(o,C(t),t));switch(o){case"touchstart":case"mousedown":l=!0,m||(m=L(t,r,i),m&&s.push(m));break;case"touchmove":case"mousemove":if(l){var u=A(t,r,i);if(!u)u=O(t,r,i);else{var a=M(t,r,i);a&&s.push(a)}u&&s.push(u)}break;case"touchend":case"touchcancel":case"mouseup":case"mouseleave":if(o==="touchcancel"&&t.target!==i.dom)return;if(l){h&&s.push(new ut(ot.events.TRANSFORM_END,C(t),t));if(c){var f=_(t,r,i);f&&s.push(f),s.push(new ut(ot.events.DRAG_END,C(t),t))}if(!h&&!c&&o!=="mouseleave"){var p=D(t,r,i);p&&(s.push(p),s.push(new ut(ot.events.SELECT,C(t),t)))}}s.push(new ut(ot.events.RELEASE,C(t),t)),k()}return s},B=function(t,r,i){t=t||e.event,r=r||n;var s=[];P(t);var o=t.type.toLowerCase();if(r[o]){s.push(new ut(o,C(t),t));switch(o){case"mousedown":l=!0,m||(m=L(t,r,i),m&&s.push(m));break;case"mousemove":if(l){var u=O(t,r,i);u&&s.push(u)}break;case"mouseup":case"mouseleave":l&&c&&s.push(new ut(ot.events.DRAG_END,C(t),t)),o==="mouseup"&&s.push(new ut(ot.events.RELEASE,C(t),t)),k();break;case"click":k(),s.push(new ut(ot.events.SELECT,C(t),t));break;default:}}return s},j=function(e){var n=[],r,i=e.target.getBoundingClientRect();if(e.touches)for(var s=0,o=e.touches.length;s<o;s++)r=e.touches[s],n.push({x:r.pageX,y:r.pageY,targetX:r.clientX-i.left,targetY:r.clientY-i.top});else{var u=t.body;n.push({x:e.pageX||e.clientX+(t&&t.documentElement&&t.documentElement.scrollLeft||u&&u.scrollLeft||0)-(t&&t.documentElement&&t.documentElement.clientLeft||u&&u.clientLeft||0),y:e.pageY||e.clientY+(t&&t.documentElement&&t.documentElement.scrollTop||u&&u.scrollTop||0)-(t&&t.documentElement&&t.documentElement.clientTop||u&&u.clientTop||0),targetX:e.offsetX||e.clientX-i.left,targetY:e.offsetY||e.clientY-i.top})}return n},F=function(e){if(e.length>=2&&e[0]&&e[1]){var t=e[0],n=e[1],r=t.x-n.x,i=t.y-n.y;return q(r,i)}return 0},q=function(e,t){return Math.sqrt(e*e+t*t)},R=function(e){return e.touches?e.touches.length:1},U=function(e,t){return e&&t?Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI:0},z=function(e){var t={down:e>=45&&e<135,left:e>=135||e<=-135,up:e<-45&&e>-135,right:e>=-45&&e<=45},n,r;for(r in t)if(t[r]){n=r;break}return n},W=function(e,t){return e!==0?t/e:1},X=function(e,t){if(e&&e.length>=2&&t&&t.length>=2){var n,r;n=e[0].x-e[1].x,r=e[0].y-e[1].y;var i=Math.atan2(r,n)*180/Math.PI;n=t[0].x-t[1].x,r=t[0].y-t[1].y;var s=Math.atan2(r,n)*180/Math.PI;return s-i}return 0},V=function(e,n,r){n=n.split(" "),a(n,function(n){var i=e.dom;i.addEventListener?i.addEventListener(n,r,!1):t.attachEvent&&i.attachEvent("on"+n,r)},self)};return it.extend({element:null,options:null,enabled:!0,constructor:function(e,t){var i=this;if(!J(e,vt))throw"No Element";i.options=f({},n,t),i.options.instance&&!ot.instance&&(ot.instance=i.options.instance,ot.instance.bind("childDestroyed",function(){k()})),a(r,function(t,n){e.css(n,t)},self),I.touch&&V(e,"touchstart touchmove touchend touchcancel",K(i,i.handleTouchEvent)),!I.touch&&I.touchPreview?V(e,"mouseup mousedown mousemove mouseout mouseleave",K(i,i.handleTouchEvent)):!E.android&&!E.ios&&V(e,"click mouseup mousedown mouseover mousemove mouseout mouseleave",K(i,i.handleMouseEvent)),i.element=e},handleGenericEvent:function(e,t){var n=this;if(n.enabled){var r=t(e,n.options,n.element);n.trigger(r)}},handleTouchEvent:function(e){this.handleGenericEvent(e,H)},handleMouseEvent:function(e){this.handleGenericEvent(e,B)},trigger:function(e){o.isArray(e)?a(e,function(e){e.trigger()},this):e.trigger()}},{events:{SELECT:"tapclick",TAP:"tap",DOUBLE_TAP:"doubletap",HOLD:"hold",DRAG:"drag",DRAG_START:"dragstart",DRAG_END:"dragend",SWIPE:"swipe",PINCH:"pinch",ZOOM:"zoom",TRANSFORM:"transform",TRANSFORM_START:"transformstart",TRANSFORM_END:"transformend",TOUCH_START:"touchstart",TOUCH_END:"touchend",TOUCH_MOVE:"touchmove",TOUCH_CANCEL:"touchcancel",RELEASE:"release",CLICK:"click",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_MOVE:"mousemove",MOUSE_WHEEL:"mousewheel"},position:{},instance:null})}(),ut=it.extend({type:null,info:null,element:null,event:null,timer:null,triggered:!1,delay:null,constructor:function(e,t,n,r){var i=this;i.type=e,i.info=t,i.event=n,i.delay=r},trigger:function(){function a(t,n){var r=t&&(t.bound(e.type)||e.cascadeMatch(t,e.type));return r}var e=this,t=!1;if(!e.delay&&!e.triggered){e.triggered=!0;var n=vt.getById(e.event.target.id);if(a(n,e.type))e.element=n;else{var r=e.event.target,i=r&&(r.parent||r.parentNode);while(i&&!e.element){n=vt.getById(i.id),t=t||e.scrollMatch(n);if(a(n,e.type)){e.element=n;break}i=i.parent||i.parentNode}}if(e.element){var s=o.flatten(ut.cascades);u(s,e.type)&&(!t||!I.nativeScroll)&&e.event.preventDefault(),e.element.trigger({type:e.type,info:e.info},!0)}}else L.n===typeof e.delay&&e.delay>0&&(e.timer=setTimeout(function(){e.delay=0,e.trigger()},e.delay))},cancel:function(){clearTimeout(this.timer)},cascadeMatch:function(e,t){var n=!1,r=c(ut.cascades,function(e){return u(e,t)});return r.length>0&&(r=o.flatten(r),n=o.any(r,function(t){return e.bound(t)})),n},scrollMatch:function(e){return e&&e.getAttribute("data-label")==="scrollholder"}},{cascades:{drag:[ot.events.DRAG_START,ot.events.DRAG,ot.events.DRAG_END,ot.events.SWIPE],transform:[ot.events.TRANSFORM_START,ot.events.TRANSFORM,ot.events.TRANSFORM_END,ot.events.PINCH,ot.events.ZOOM]}}),at=it.extend({__listeners__:null,__enabled__:!0,bind:function(e,t){L.s===typeof e&&(e=e.split(" "));if(!o.isArray(e))throw"Cannot bind, invalid argument";var n=this.__listeners__||(this.__listeners__={});a(e,function(e){n[e]||(n[e]=[]),(!this.bound(e)||!o.find(n[e],function(e){return e===t}))&&n[e].push(t)},this)},unbind:function(e,t){L.s===typeof e&&(e=e.split(" "));if(!o.isArray(e))throw"Cannot unbind, invalid argument";a(e,function(e){var n=this.__listeners__&&this.__listeners__[e];n&&n.length>0&&(t?this.__listeners__[e]=c(n,function(e){return e!==t}):this.__listeners__[e]=[])},this)},trigger:function(e,t){if(!this.__enabled__)return;var n=this;L.s===typeof e&&(e={type:e}),e.target=e.target||n,e.currentTarget=n,e.halt=K(e,n.__halt__);var r=e.type&&n.__listeners__&&n.__listeners__[e.type];r&&r.length>0&&a(r,function(t){t.call(null,e)},n);if(t&&!e._doHalt&&n.parent&&n.parent.trigger)try{n.parent.trigger.call(n.parent,e,t)}catch(i){}},bound:function(e){return this.__listeners__&&this.__listeners__[e]&&this.__listeners__[e].length>0},getCallbacksForEventType:function(e){if(!this.bound(e))return[];[].concat(this.__listeners__[e])},enabled:function(e){return L.u!==typeof e&&(this.__enabled__=e),this.__enabled__},__halt__:function(){this._doHalt=!0}}),ft=at.extend({_object:null,_startTime:0,_duration:0,_ease:null,_interval:null,_startValues:null,_endValues:null,_deltaValues:null,_path:null,constructor:function(e,t){this._ease=ft.easing.linear,this._object=e,this._path=t,this._tick=K(this,this._tick)},run:function(e,t,n,r){var i=this;i.isRunning()&&i.cease(),i._startTime=+(new Date),i._ease=n||i._ease,i._duration=t,i._startValues={},i._deltaValues={},i._endValues=e,i._path=r||i._path,i._pathValues={},a(i._endValues,function(e,t){i._startValues[t]=i._getValue(t)},i),a(i._startValues,function(e,t){i._deltaValues[t]=i._endValues[t]-e},i);if(i._path){var s=i._path.getTotalLength(),o=i._path.getPointAtLength(0),u=i._path.getPointAtLength(s);i._pathValues={length:s,startPoint:o,endPoint:u},i._endValues.x=i._startValues.x+(u.x-o.x),i._endValues.y=i._startValues.y+(u.y-o.y)}i._interval=mt.requestAnimationFrame(i._tick)},cease:function(){if(this.isRunning()){var e=this;setTimeout(function(){clearInterval(e._interval),e._interval=null},T)}},end:function(){a(this._endValues,function(e,t){this._setValue(t,e)},this),this.trigger({type:ft.events.COMPLETE}),this.cease()},beginning:function(){a(this._startValues,function(e,t){this._setValue(t,e)},this),this.cease()},isRunning:function(){return!!this._interval},_tick:function(){var e=+(new Date)-this._startTime,t=e/this._duration;t>=1?this.end():(a(this._startValues,function(t,n){this._setValue(n,this._calculateValue(e,n))},this),this.trigger({type:ft.events.UPDATE}),this._interval=mt.requestAnimationFrame(this._tick))},_calculateValue:function(e,t){var n=this._startValues[t],r=this._deltaValues[t],i=n;(t==="x"||t==="y")&&this._path&&(n=0,r=this._pathValues.length);var s=this._ease(e,this._duration,n,r);if(this._path)if(t==="x"||t==="y"){var o=this._path.getPointAtLength(s);s=i+(o[t]-this._pathValues.startPoint[t])}return s},_setValue:function(e,t){var n=this._object;e in n&&(L.f===typeof n[e]?n[e](t):n[e]=t)},_getValue:function(e){var t=this._object;return e in t&&L.f===typeof t[e]?t[e]():t[e]}},{events:{COMPLETE:"tween_complete",UPDATE:"tween_update"},easing:{linear:function(e,t,n,r){return r*(e/t)+n},easeOut:function(e,t,n,r){return e/=t,r*(Math.pow(--e,3)+1)+n},easeIn:function(e,t,n,r){return e/=t,r*Math.pow(e,3)+n},easeInOut:function(e,t,n,r){return e/=t/2,e<1?r/2*Math.pow(e,3)+n:(e-=2,r/2*(Math.pow(e,3)+2)+n)}}}),lt=at.extend({play:function(){},pause:function(){},load:function(){},muted:!1,currentTime:0,paused:!1,volume:1,currentSrc:"",constructor:function(e){if(e){var t=this;t.load=K(e,e._loadVideo),t.play=K(e,e._playVideo),t.pause=K(e,e._pauseVideo),Object.defineProperty(t,"muted",{get:function(){return e._getMuted()},set:function(t){t?e._muteVideo():e._unmuteVideo()}}),Object.defineProperty(t,"currentTime",{get:function(){return e._getCurrentTime()},set:function(t){e._seekVideo(t)}}),Object.defineProperty(t,"duration",{get:function(){return e._getDuration()},set:function(){}}),Object.defineProperty(t,"paused",{get:function(){return e._getPaused()},set:function(){}}),Object.defineProperty(t,"volume",{get:function(){return e._getVolume()},set:function(t){e._setVolume(t)}}),Object.defineProperty(t,"currentSrc",{get:function(){return e._getCurrentSource()},set:function(){}}),Object.defineProperty(t,"videoHeight",{get:function(){return e._getVideoHeight()},set:function(){}}),Object.defineProperty(t,"videoWidth",{get:function(){return e._getVideoWidth()},set:function(){}}),o.each(lt.VIDEO_EVENTS,function(n){e._addVideoEventListener(n,function(e){t.trigger(n,e)})})}},addEventListener:function(){this.bind.apply(this,arguments)},removeEventListener:function(){this.unbind.apply(this,arguments)}},{VIDEO_EVENTS:{PLAY:"play",PLAYING:"playing",PAUSE:"pause",EMPTIED:"emptied",VOLUMECHANGE:"volumechange",TIMEUPDATE:"timeupdate",ENDED:"ended",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",PROGRESS:"progress",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",ERROR:"error",WEBKITBEGINFULLSCREEN:"webkitbeginfullscreen",WEBKITENDFULLSCREEN:"webkitendfullscreen",BEGINFULLSCREEN:"beginfullscreen",ENDFULLSCREEN:"endfullscreen"}}),ct=at.extend({constructor:function(){_t.register(this)},send:function(e,t,n){t&&o.is.truly(t.globalMessage)&&r.MessageBus?r.MessageBus.triggerGlobalMessageHandler(this,e,t,n):_t.dispatchMessage(this,e,t,n)},receive:function(e,t,n){this.trigger({type:ct.events.MESSAGE_RECEIVED,message:e,payload:t,trigger:n})}},{events:{MESSAGE_RECEIVED:"messagereceived"}}),ht=at.extend({__ref:null,_id:null,_type:null,_duration:null,_dispatcher:null,_metricsHelper:null,_metricsEnabled:!1,_progressPercent:0,_lastProgress:0,_lastTime:0,_progressTrackers:{},_percentTrackers:{},constructor:function(e){var t=this;if(!e||!e.id||L.u===typeof e.type||!e.dispatcher)throw"Invalid object";t.__ref=Math.random().toString(),t._id=e.id,t._type=e.type,t._duration=e.duration,t._dispatcher=e.dispatcher,t._metricsHelper=e.metricsHelper,t.enableMetrics(),t._dispatcher.addEventListener(lt.VIDEO_EVENTS.PLAYING,K(t,t._onPlay)),t._dispatcher.addEventListener(lt.VIDEO_EVENTS.PAUSE,K(t,t._onPause)),t._dispatcher.addEventListener(lt.VIDEO_EVENTS.VOLUMECHANGE,K(t,t._onVolumeChange)),t._dispatcher.addEventListener(lt.VIDEO_EVENTS.TIMEUPDATE,K(t,t._onTimeUpdate)),t._dispatcher.addEventListener(lt.VIDEO_EVENTS.ENDED,K(t,t._onEnded)),t._dispatcher.addEventListener(lt.VIDEO_EVENTS.LOADEDMETADATA,K(t,t._onLoadedMetadata))},getId:function(){return this._id},getType:function(){return this._type},getDuration:function(){return this._duration},getDispatcher:function(){return this._dispatcher},pause:function(e){this._metricsHelper=e.metricsHelper,this._dispatcher.pause()},setMetricsHelper:function(e){this._metricsHelper=e},enableMetrics:function(){var e=this;if(e._metricsEnabled)return;var t=function(t){if(e._metricsEnabled){var n=f({videoId:e._id,videoType:e._type,subtype:St.subtype["VIDEO_"+t.type]});e._metricsHelper&&e._metricsHelper.logVideo(n)}};for(var n in pt.events)pt.events[n]!==pt.events.PROGRESS&&pt.events[n]!==pt.events.REWIND_PROGRESS&&(e.bound(pt.events[n])||e.bind(pt.events[n],t));e._metricsEnabled=!0},disableMetrics:function(){this._metricsEnabled=!1},_onPlay:function(){this._progressPercent>0&&this.trigger(pt.events.RESUME)},_onPause:function(){this._progressPercent<1&&this.trigger(pt.events.PAUSE)},_onVolumeChange:function(){this.trigger(this._dispatcher.muted||!this._dispatcher.volume?pt.events.MUTE:pt.events.UNMUTE)},_onTimeUpdate:function(){if(this._duration>0){var e=this._dispatcher.currentTime,t=e/this._duration;t>0&&this._progressPercent===0&&this.trigger(pt.events.START),t>=.03125&&this._progressPercent<.03125&&this.trigger(pt.events.FIRST_THIRTYSECOND),t>=.0625&&this._progressPercent<.0625&&this.trigger(pt.events.FIRST_SIXTEENTH),t>=.125&&this._progressPercent<.125&&this.trigger(pt.events.FIRST_EIGHTH),t>=.25&&this._progressPercent<.25&&this.trigger(pt.events.FIRST_QUARTILE),t>=.5&&this._progressPercent<.5&&this.trigger(pt.events.MIDPOINT),t>=.75&&this._progressPercent<.75&&this.trigger(pt.events.THIRD_QUARTILE),this._progressPercent=Math.max(t,this._progressPercent);if(e!==this._lastTime){var n=(e-this._lastTime)*10;if(n!==0){var r=Math.abs(n);for(var i=0;i<r;i++){var s=n>0?1:-1,o=Number((this._lastTime+(s*i+1)*.1).toFixed(1));if(!this._lastProgress||this._lastProgress!=o){var u=n>0?pt.events.PROGRESS:pt.events.REWIND_PROGRESS;this.trigger({type:u,data:o}),this._lastProgress=o}}}this._lastTime=e}}},_onEnded:function(){this.trigger(pt.events.COMPLETE)},_onLoadedMetadata:function(){this._duration||(this._duration=this._dispatcher.duration)}}),pt=it.extend({_videos:{},registerVideo:function(e){var t=new ht(e);return this._videos[t.__ref]=t,t},unregisterVideo:function(e){var t=this._videos[e.__ref];t&&(t.enabled(!1),delete this._videos[e.__ref])},pauseVideos:function(e){for(var t in this._videos)this._videos[t].pause(e)}},{events:{MUTE:"MUTE",UNMUTE:"UNMUTE",PAUSE:"PAUSE",RESUME:"RESUME",SKIP:"SKIP",START:"START",FIRST_QUARTILE:"FIRST_QUARTILE",MIDPOINT:"MIDPOINT",THIRD_QUARTILE:"THIRD_QUARTILE",COMPLETE:"COMPLETE",PROGRESS:"PROGRESS",REWIND_PROGRESS:"REWIND_PROGRESS",FIRST_THIRTYSECOND:"FIRST_THIRTYSECOND",FIRST_SIXTEENTH:"FIRST_SIXTEENTH",FIRST_EIGHTH:"FIRST_EIGHTH"}}),dt={zoom:1,viewable:!0,EVENTS:{ZOOM:"zoom",VIEWABLE_CHANGE:"viewable_change"},_dispatcher:new at,init:function(e){if(e&&e.view){dt.zoom=e.view.zoom;if(e.view.getViewabilityCallback){var t={area:50,areaUnit:"pct",threshold:1},n=o.extend({},t,{direction:"out"}),r=e.view.getViewabilityCallback(function(){dt.setViewable(!0)},dt,t),i=e.view.getViewabilityCallback(function(){dt.setViewable(!1)},dt,n);e.view.addViewabilityListener(r),e.view.addViewabilityListener(i);var s=e.view.getViewabilityPositionData();dt.viewable=s&&s.viewableMetrics&&s.viewableMetrics.percent>50}}},bind:function(){dt._dispatcher.bind.apply(dt._dispatcher,arguments)},unbind:function(){dt._dispatcher.unbind.apply(dt._dispatcher,arguments)},getZoom:function(){return dt.zoom},setZoom:function(e){e=e||1,dt.zoom!=e&&(dt.zoom=e,dt._dispatcher.trigger({type:dt.EVENTS.ZOOM,data:{zoom:dt.zoom}}))},isViewable:function(){return dt.viewable},setViewable:function(e){dt.viewable!=e&&(dt.viewable=e,dt._dispatcher.trigger({type:dt.EVENTS.VIEWABLE_CHANGE,data:{viewable:dt.viewable}}))}},vt=at.extend({_x:0,_y:0,_width:0,_height:0,_scale:1,_rotation:0,_alpha:1,_blur:0,_grayscale:0,_sepia:0,_saturate:1,_visible:1,_offsetX:0,_offsetY:0,_children:null,_gestures:null,_styleHelper:null,_oldLeft:null,id:null,dom:null,parent:null,style:null,constructor:function(e,n){if(!vt.holder){var r=vt.holder=t.createElement("div");r.id="__ELEMENTS__",r.style.position="fixed",r.style.top=r.style.left="-1px",r.style.width=r.style.height="1px",r.style.visibility=A.h,r.style.overflow=A.v,r.style.pointerEvents="none",r.style.zIndex="-1000",t.body.appendChild(r)}var i=this;L.s===typeof e&&!u(vt.blacklist,e)&&(e=t.createElement(e));if(!q(e))throw"Invalid Type";i.dom=e,i.id=i.dom.id||e.nodeName.toLowerCase()+vt.domCount++,i.dom.id=i.dom.id||i.id,i.dom.parentElement||vt.holder.appendChild(i.dom),a([ot.events.MOUSE_ENTER,ot.events.MOUSE_LEAVE],function(e){i.dom.addEventListener(e,function(e){i.trigger(e.type,!1)})}),i._children=[],n&&i.setAttribute(n),i.style=e.style,i._styleHelper=new st(i),i.css({position:i.style.position||"absolute",overflow:i.style.overflow||A.h,padding:i.style.padding||"0px",margin:i.style.margin||"0px",top:i.style.top||"0px",left:i.style.left||"0px",cursor:i.style.cursor||"inherit"}),i._oldLeft=i.style.left,i._setPointerEvents(),i.dom.tagName&&!u(vt.gestureBlackList,i.dom.tagName.toLowerCase())&&(i.css("user-drag","none"),i.css("user-select","none")),i.width=U(i,"_width","width","%vpx",i.dom,"offsetWidth"),i.height=U(i,"_height","height","%vpx",i.dom,"offsetHeight"),i.alpha=U(i,"_alpha","alpha","%v",i.style,"opacity"),i.blur=U(i,"_blur","blur","%v",i.style,"blur"),i.brightness=U(i,"_brightness","brightness","%v",i.style,"brightness"),i.contrast=U(i,"_contrast","contrast","%v",i.style,"contrast"),i.grayscale=U(i,"_grayscale","grayscale","%v",i.style,"grayscale"),i.huerotate=U(i,"_huerotate","huerotate","%v",i.style,"huerotate"),i.invert=U(i,"_invert","invert","%v",i.style,"invert"),i.saturate=U(i,"_saturate","saturate","%v",i.style,"saturate"),i.sepia=U(i,"_sepia","sepia","%v",i.style,"sepia"),i.x=z(i,"_x"),i.y=z(i,"_y"),i.offsetX=z(i,"_offsetX"),i.offsetY=z(i,"_offsetY"),i.scale=z(i,"_scale"),i.rotation=z(i,"_rotation"),i.x(0),i.y(0),R(e)&&(dt.bind(dt.EVENTS.ZOOM,K(i,i._updateScale)),i.bind(vt.events.RESIZE,K(i,i._updateScale)),i._updateScale()),vt.map[i.id]=i},setAttribute:function(e){if(L.s===typeof e&&L.u!==typeof arguments[1])this.dom.setAttribute(e,arguments[1]);else if(L.o===typeof e){var t=p(e);a(t,function(t){this.dom.setAttribute(t,e[t])},this)}},getAttribute:function(e){if(L.s===typeof e)return this.dom.getAttribute(e);if(L.o===typeof e){var t=p(e),n={};return a(t,function(t){n[t]=e[t]},this),n}},removeAttribute:function(e){if(L.s===typeof e)this.dom.removeAttribute(e);else if(o.isArray(e))a(e,function(e){this.dom.removeAttribute(e)},this);else if(L.o===typeof e){var t=p(e);a(t,function(e){this.dom.removeAttribute(e)},this)}},html:function(e){return e&&(this.dom.innerHTML=e),this.dom.innerHTML},text:function(e){return e&&(this.dom.textContent=e),this.dom.textContent},css:function(e){if(L.s===typeof e){if("undefined"==typeof arguments[1])return this._styleHelper.getStyle(e);this._styleHelper.hasStyle(e)&&this._styleHelper.setStyle(e,arguments[1])}else if(L.o===typeof e){var t=p(e);a(t,function(t){this._styleHelper.setStyle(t,e[t])},this)}},addChild:function(e){if(!e)return;!J(e,vt)&&q(e)&&(e=new vt(e)),e.parent||(e.parent=this,this.dom.appendChild(e.dom),this._children.push(e),e.trigger({type:vt.events.ADDED_TO_DOM}))},removeChild:function(e){if(!e)return;J(e,vt)&&e.parent===this&&(e.parent=null,this.dom.removeChild(e.dom),this._children=c(this._children,function(t){return t!==e}))},getChild:function(e){return this._children[e]},visible:function(e){var t=this;if(L.u!==typeof e){var n=e!==this._visible;this._visible=e,n&&!this._visible&&(this._oldLeft=this.style.left),this.style.left=t._visible?this._oldLeft:"-10000px",this._setPointerEvents(),n&&this.trigger({type:vt.events.VISIBILITY_CHANGE,visible:e})}return this._visible},enabled:function(e){var t=this,n=vt.__super__.enabled.call(t,e);return L.u!==typeof e&&t._setPointerEvents(),n},tactileEvents:d(ot.events),bind:function(e,t){vt.__super__.bind.call(this,e,t),u(this.tactileEvents,e)||this.dom.addEventListener.apply(this.dom,arguments)},unbind:function(e,t){vt.__super__.unbind.call(this,e,t),!u(this.tactileEvents,e)&&t&&this.dom.removeEventListener.apply(this.dom,arguments)},_updateScale:function(){this._width&&this._height&&(this.css("transform-origin","top left"),this.scale(dt.zoom),this.css("width",this._width/dt.zoom+"px"),this.css("height",this._height/dt.zoom+"px"))},_setPointerEvents:function(){this.style.pointerEvents=this.visible()&&this.enabled()?"auto":"none"},_isGestureBound:function(){var e=d(ot.events).concat(d(gt.events)),t=d(e);for(i=0,l=t.length;i<l;i++)if(this.bound(t[i]))return!0;return!1}},{domCount:0,blackList:["script"],gestureBlackList:["input","option","select","textarea"],holder:null,map:{},events:{ADDED_TO_DOM:"element_added_to_dom",RESIZE:"element_resize",VISIBILITY_CHANGE:"element_visibilitychange"},getElement:function(e,t){return new vt(e,t)},getById:function(e){return vt.map[e]}}),mt=at.extend({_startValues:null,_endValues:null,_ease:null,_duration:0,_container:null,_running:!1,_endHandler:null,_tween:null,_path:null,_noopTimeout:null,constructor:function(e,t,n,r){var i=this;this._startValues={},this._endValues={};if(!e||!J(e,vt))throw"Invalid object";this._container=e,this._container.bind(mt.events.STARTED,function(e){e.animation!==i&&i.cease()}),this._path=r,this._useCSS()||(this._tween=new ft(this._container,this._path)),this._duration=t||this._duration,this._ease=this._mapEase(n),o.bindAll(this)},update:function(e,t,n){this._duration=e||this._duration,this._ease=this._mapEase(t),this._path=n},run:function(e){var t=this,n=e.to,r=e.from;!n&&!r&&(n=e),t.cease(),t._endValues=f({},t._getAnimationValues(n));if(t._duration-T*3<=0){t.end();return}t._endHandler=t._generateEndHandler(),t._useCSS()?t._container.bind(mt.transitionEndEventName,this._endHandler,!0):t._tween.bind(ft.events.COMPLETE,this._endHandler),t._running=!0,t._container.trigger({type:mt.events.STARTED,animation:t}),r?(r=t._getAnimationValues(r),"alpha"in r&&t._container.alpha(r.alpha),t._requestFrame(function(){r=f({},r);var e=p(r);t._requestFrame(function(){a(e,function(e){t._setValue(e,r[e])},t),t._requestFrame(t._handleFrame)})})):t._requestFrame(t._handleFrame)},beginning:function(){this._reset();if(this._useCSS())for(var e in this._startValues){if(!this._startValues.hasOwnProperty(e))continue;this._setValue(e,this._startValues[e])}else this._tween.beginning()},end:function(){this._reset();if(this._useCSS())for(var e in this._endValues){if(!this._endValues.hasOwnProperty(e))continue;this._setValue(e,this._endValues[e])}else this._tween.end();this.trigger({type:mt.events.COMPLETE})},cease:function(){this.isRunning()&&(this._reset(),this.trigger({type:mt.events.CANCELLED}))},isRunning:function(){return this._running},_getAnimationValues:function(e){var t=this,n={},r=p(e);return a(r,function(r){L.f===typeof t._container[r]&&(n[r]=e[r])},t),n},_requestFrame:function(e){this._frame=mt.requestAnimationFrame(e)},_cancelFrame:function(e){mt.cancelAnimationFrame(e)},_handleFrame:function(){var e=this,t=Math.floor(e._duration-T*3);if(this._useCSS()){e._container.css("transition-property","all"),e._container.css("transition-duration",t+"ms"),e._container.css("transition-timing-function",e._ease);var n=p(e._endValues);w.firefox&&w.version<35&&(n=c(n,function(e){return e!=="blur"}),"blur"in e._endValues&&delete e._endValues.blur),a(n,function(t){e._startValues[t]=e._getValue(t)},e),o.isEqual(e._startValues,e._endValues)?e._noopTimeout=setTimeout(function(){e.end()},e._duration):a(n,function(t){e._setValue(t,e._endValues[t])},e)}else e._tween.run(e._endValues,t,e._mapTweenEase(e._ease),e._path)},_reset:function(){this._cancelFrame(this._frame),clearTimeout(this._noopTimeout),this._running=!1,this._useCSS()?(this._container.unbind(mt.transitionEndEventName,this._endHandler,!0),this._container.css("transition-property","none"),this._container.css("transition-duration","0"),this._container.css("transition-timing-function","")):(this._tween.unbind(ft.events.COMPLETE,this._endHandler),this._tween.cease()),this._endHandler=null},_generateEndHandler:function(){return K(this,function(e){(e.target===this._container.dom||e.target===this._tween)&&this.end()})},_mapEase:function(e){var t={easeIn:mt.eases.EASE_IN,easeOut:mt.eases.EASE_OUT,easeInOut:mt.eases.EASE_IN_OUT,easeNone:mt.eases.LINEAR};return t[e]||mt.eases.LINEAR},_mapTweenEase:function(e){var t={"ease-in":ft.easing.easeIn,"ease-out":ft.easing.easeOut,"ease-in-out":ft.easing.easeInOut,linear:ft.easing.linear};return t[e]||ft.easing.linear},_useCSS:function(){return mt.useCSS&&!this._path},_setValue:function(e,t){L.f===typeof this._container[e]&&this._container[e](t)},_getValue:function(e){if(L.f===typeof this._container[e])return this._container[e]()}},{transitionEndEventName:"transitionend",animationFrame:null,cancelFrame:null,animationFrameSupported:!0,useCSS:!0,requestAnimationFrame:function(e){var t;if(mt.animationFrameSupported){var n=o.getExpandableWindow();t=n[mt.animationFrame](e)}else t=setTimeout(e,T);return t},cancelAnimationFrame:function(e){if(mt.animationFrameSupported){var t=o.getExpandableWindow();t[mt.cancelFrame](e)}else clearTimeout(e)},events:{COMPLETE:"animation_complete",CANCELLED:"animation_cancelled",STARTED:"animation_started"},eases:{LINEAR:"linear",EASE_IN:"ease-in",EASE_OUT:"ease-out",EASE_IN_OUT:"ease-in-out"}});(function(){var e=o.getExpandableWindow();"requestAnimationFrame"in e?mt.animationFrame="requestAnimationFrame":I.prefix+"RequestAnimationFrame"in e&&(mt.animationFrame=I.prefix+"RequestAnimationFrame"),"cancelAnimationFrame"in e?mt.cancelFrame="cancelAnimationFrame":I.prefix+"RequestAnimationFrame"in e&&(mt.cancelFrame=I.prefix+"CancelAnimationFrame");if(mt.animationFrame){var t=/iP(ad|hone|od).*OS 6/.test(b);mt.animationFrameSupported=!t&&(!E.ios||e===top)}I.prefix==="webkit"&&(mt.transitionEndEventName="webkitTransitionEnd"),mt.useCSS=!w.msie||w.version>9})();var gt=at.extend({_element:null,_holder:null,_content:null,_options:null,_origOverflow:null,_scrollStart:null,_nativeScroll:null,_rules:null,_keyLock:null,_useTouch:!1,_useTrueNative:!1,_conversionTimeout:null,_conversionAborted:!1,_initialized:!1,_scrollOffsetX:0,_scrollOffsetY:0,_trackVert:null,_trackHorz:null,_animation:null,_dragging:null,_tween:null,_tweenOn:null,_enabled:null,_thickness:null,_defaults:{initialPosition:null,hide:!0,sliderColor:"#000",thickness:7},constructor:function(e,t,n){var r=this;if(!e||!J(e,vt))throw"No Element";r._element=e,r._content=e.getChild(0),r._options=o.defaults(t||{},r._defaults),r._thickness=r._options.thickness,r._origOverflow=e.style&&e.style.overflow,r._useTouch=I.touch||I.touchPreview,r._element.css("overflow-scrolling","touch"),r._useTrueNative=I.nativeScroll,r._useTrueNative&&E.ios&&(n.view.target.style.webkitOverflowScrolling="touch",n.view.target.style.overflow="auto"),r._nativeScroll={},r._rules={},o.bindAll(r),r.enable()},enable:function(){var e=this;e._enabled=!0;if(!e._element.visible()&&!e._initialized){e._element.bind(vt.events.VISIBILITY_CHANGE,function(t){t.visible&&e._enabled&&e.enable()});return}if(!e._holder){e._holder=new vt("div",{"data-label":"scrollholder"}),e._holder.x(0),e._holder.y(0),w.msie&&e._holder.css("background-color","rgba(0, 0, 0, 0.01)"),e._useTrueNative&&(e._holder.css("-webkit-overflow-scrolling","touch"),e._holder.css("overflow",A.a));var t=[];while(e._element.getChild(0)){var n=e._element.getChild(0);t.push(n),e._element.removeChild(n)}a(t,function(t){e._holder.addChild(t)}),e._element.addChild(e._holder);var r=e._element.width,i=e._element.height;e._element.width=function(t){return e._holder.width(t),r(t)},e._element.height=function(t){return e._holder.height(t),i(t)}}e._holder.width(e._element.width()),e._holder.height(e._element.height());var s=e._holder.style;s.overflow=A.a,e._holder.bind("scroll",e._handleNativeScrollEvent),e._holder.bind("keyup",e._handleKeyUp),e._rules=e._getRules(),e._initialized?(e._holder.width(e._holder.width()+e._scrollOffsetX),e._holder.height(e._holder.height()+e._scrollOffsetY)):e._content.height()>e._content.width()?(e._scrollOffsetX=e._holder.width()-e._holder.dom.clientWidth,e._content.height()>e._holder.height()&&(e._firefoxLengthAdjustment("x"),e._holder.width(e._holder.width()+e._scrollOffsetX)),e._scrollOffsetY=e._holder.height()-e._holder.dom.clientHeight,e._content.width()>e._holder.width()&&(e._firefoxLengthAdjustment("y"),e._holder.height(e._holder.height()+e._scrollOffsetY))):(e._scrollOffsetY=e._holder.height()-e._holder.dom.clientHeight,e._content.width()>e._holder.width()&&(e._firefoxLengthAdjustment("y"),e._holder.height(e._holder.height()+e._scrollOffsetY)),e._scrollOffsetX=e._holder.width()-e._holder.dom.clientWidth,e._content.height()>e._holder.height()&&(e._firefoxLengthAdjustment("x"),e._holder.width(e._holder.width()+e._scrollOffsetX))),e._useTouch&&(s.overflow=(I.mobile||I.touchPreview)&&!e._useTrueNative?A.h:A.a,e._useTrueNative?(e._holder.bind(ot.events.DRAG_START,e._onNativeDragStart),e._holder.bind(ot.events.DRAG,e._onNativeDrag),e._holder.bind(ot.events.SWIPE,e._onNativeDrag)):(e._holder.bind(ot.events.DRAG_START,e._onDragStart),e._holder.bind(ot.events.DRAG,e._onDrag),e._holder.bind(ot.events.DRAG_END,e._onDragEnd))),e._animation||(e._animation=new mt(e._content,200,mt.eases.EASE_OUT)),e._options.initialPosition&&e._holder&&(e._options.initialPosition.x&&(e._holder.dom.scrollLeft=-1*e._options.initialPosition.x),e._options.initialPosition.y&&(e._holder.dom.scrollTop=-1*e._options.initialPosition.y)),e._tween||(e._tween=new ft(e._holder.dom)),e._initializeTrack(),e._initialized=!0},disable:function(){var e=this;e._enabled=!1;var t=this._holder.style;e._useTouch&&(e._useTrueNative?(e._holder.unbind(ot.events.DRAG_START,this._onDragStart),e._holder.unbind(ot.events.DRAG,this._onDrag),e._holder.unbind(ot.events.DRAG_END,this._onDragEnd)):(e._holder.unbind(ot.events.DRAG_START,this._onNativeDragStart),e._holder.unbind(ot.events.DRAG,this._onNativeDrag),e._holder.unbind(ot.events.SWIPE,this._onNativeDrag))),e.stopScroll(),e._holder.unbind("scroll",this._handleNativeScrollEvent),e._holder.unbind("keyup",this._handleKeyUp),t.overflow=this._origOverflow},thickness:function(){return this._thickness+8},getScrollPosition:function(){return{y:this._holder.dom.scrollTop,x:this._holder.dom.scrollLeft,scrollHeight:this._holder.dom.scrollHeight,scrollWidth:this._holder.dom.scrollWidth,offsetX:this._content.x(),offsetY:this._content.y(),maxX:this._holder.dom.scrollWidth-this._holder.dom.clientWidth,maxY:this._holder.dom.scrollHeight-this._holder.dom.clientHeight}},scrollTo:function(e,t){var n=this;t=L.u===typeof t||isNaN(t)?0:t,e=e||{};if(t===0)L.u!==typeof e.x&&e.x!==n._holder.dom.scrollLeft&&(n._holder.dom.scrollLeft=e.x),L.u!==typeof e.y&&e.y!==n._holder.dom.scrollTop&&(n._holder.dom.scrollTop=e.y);else if(n._tween){n._tween.isRunning()&&n._tween.cease();var r=n.getScrollPosition(),i=o.defaults({scrollLeft:e.x,scrollTop:e.y},{scrollLeft:r.x,scrollTop:r.y});n._tweenOn=!0,n._tween.run(i,t,ft.easing.easeOut)}},stopScroll:function(){this._tween&&this._tween.cease()},_getRules:function(){var e=this._getDimensions(this._element),t=this._getDimensions(this._content);return{scrollX:e.width<t.width,scrollY:e.height<t.height}},_getDimensions:function(e){return{width:e.width(),height:e.height()}},_onDragStart:function(e){e.halt(),this._onNativeDragStart(e)},_onDrag:function(e){e.halt();var t=this._scrollStart.x+e.info.distanceX*-1,n=this._scrollStart.y+e.info.distanceY*-1;this._rules.scrollX&&(t<0?this._content.x(this._scrollStart.offsetX+t*-1):t>this._scrollStart.scrollWidth-this._holder.width()?this._content.x(this._scrollStart.offsetX+this._scrollStart.scrollWidth-this._holder.width()-t):this._holder.dom.scrollLeft=t),this._rules.scrollY&&(n<0?this._content.y(this._scrollStart.offsetY+n*-1):n>this._scrollStart.scrollHeight-this._holder.height()?this._content.y(this._scrollStart.offsetY+this._scrollStart.scrollHeight-this._holder.height()-n):this._holder.dom.scrollTop=n)},_onDragEnd:function(e){e.halt();var t={};this._content.y()!==this._scrollStart.offsetY&&(t.y=this._scrollStart.offsetY),this._content.x()!==this._scrollStart.offsetX&&(t.x=this._scrollStart.offsetX),this._animation&&this._animation.isRunning()&&this._animation.cease(),this._animation.run({to:t})},_handleKeyUp:function(e){this._keyLock=!0,this._resetKeyLock()},_handleNativeScrollEvent:function(e){var t=this;if(t._keyLock)return;t._blurActive();var n=t.getScrollPosition(),r=t._rules.scrollY&&t._rules.scrollX?t._thickness:0;t._trackVert&&!t._trackVert.dragging&&t._trackVert.y(4+(t._holder.height()-t._trackVert.height()-t._scrollOffsetY-r-8)*(n.y/(n.scrollHeight-this._holder.height()+t._scrollOffsetY))),t._trackHorz&&!t._trackHorz.dragging&&t._trackHorz.x(4+(t._holder.width()-t._trackHorz.width()-t._scrollOffsetX-r-8)*(n.x/(n.scrollWidth-this._holder.width()+t._scrollOffsetX))),!t._nativeScroll.start&&!t._tween.isRunning()?(t._nativeScroll.start=!0,t.trigger({type:gt.events.SCROLL_START,info:n})):t._tween.isRunning()||t.trigger({type:gt.events.SCROLL,info:n}),clearTimeout(t._nativeScroll.timeout),t._nativeScroll.timeout=setTimeout(function(){t._nativeScrollEnd()},250),t._conversionTimeout&&!t._conversionAborted&&(t._conversionAborted=!0,clearTimeout(t._conversionTimeout))},_nativeScrollEnd:function(){var e=this.getScrollPosition();this._tween.isRunning()||(this._nativeScroll.start=!1,this._tweenOn?this._tweenOn=!1:this.trigger({type:gt.events.SCROLL_END,info:e}))},_onNativeDragStart:function(e){this._blurActive(),this._scrollStart=this.getScrollPosition(),this._rules=this._getRules(),this._animation.isRunning()&&this._animation.cease()},_onNativeDrag:function(e){var t=this,n=t.getScrollPosition();t._rules.scrollX&&(e.info.direction==="left"||e.info.direction==="right")&&n.x>0&&n.x<n.maxX&&e.halt(),t._rules.scrollY&&(e.info.direction==="up"||e.info.direction==="down")&&n.y>0&&n.y<n.maxY&&e.halt(),!t._conversionTimeout&&!t._conversionAborted&&e.type===ot.events.DRAG&&(t._conversionTimeout=setTimeout(function(){t._useTrueNative&&(t._useTrueNative=!1,I.nativeScroll=!1,t._holder.bind(ot.events.DRAG_START,t._onDragStart),t._holder.bind(ot.events.DRAG,t._onDrag),t._holder.bind(ot.events.DRAG_END,t._onDragEnd),t._holder.unbind(ot.events.DRAG_START,t._onNativeDragStart),t._holder.unbind(ot.events.DRAG,t._onNativeDrag),t._holder.unbind(ot.events.SWIPE,t._onNativeDrag))},100))},_endKeyLock:function(){this._keyLock=!1},_resetKeyLock:function(){var e=this;clearTimeout(this._nativeScroll.keyTimeout),this._nativeScroll.keyTimeout=setTimeout(function(){e._endKeyLock()},50)},_blurActive:function(){try{I.mobile&&(t.activeElement.blur(),e.focus())}catch(n){}},_initializeTrack:function(){function t(t,n,r){var i=new vt("div",{"data-label":"scrollthumb"});return i.width(t-1),i.height(n-1),i.css("background-color",e._options.sliderColor||"#000"),i.css("border","1px solid #FFF"),i.css("border-radius",r*2+"px"),i.css("background-clip","padding-box"),i.visible(!1),i.alpha(.6),i}function n(t,n,r,i,s,o,u){var a,f,l=gt.helper;t.bind(ot.events.MOUSE_DOWN,function(r){e.stopScroll(),a=t[n](),e._dragging=t.dragging=!0,f=e._element.dom.getBoundingClientRect(),l.visible(!0),l.enabled(!0),l.x(0),l.y(0)});var c=function(f){if(t.dragging){var l=e.getScrollPosition(),c=a+f.info[i],h=e._rules.scrollY&&e._rules.scrollX?e._thickness:0,p=4+(e._holder[r]()-t[r]()-e[s]-h-8);c<4&&(c=4),c>p&&(c=p),e._holder.dom[o]=(c-4)/(p-4)*(l[u]-e._holder[r]()+e[s]),t[n](c)}},h=function(){t.dragging&&(e._dragging=t.dragging=!1,a=t[n](),l.x(-l.width()),l.y(-l.height()),l.visible(!1),l.enabled(!1))};l.bind(ot.events.MOUSE_MOVE,c),l.bind([ot.events.MOUSE_UP,ot.events.MOUSE_OUT],h)}var e=this;if(e._rules.scrollY)if(!e._trackVert){var r=t(e._thickness,Math.max(30,e._holder.height()*(e._holder.height()/e._content.height())),e._thickness);r.x(e._holder.width()-r.width()-4-e._scrollOffsetX),r.y(4),e._element.addChild(r),e._trackVert=r,n(e._trackVert,"y","height","distanceY","_scrollOffsetY","scrollTop","scrollHeight")}else e._trackVert.height(Math.max(30,e._holder.height()*(e._holder.height()/e._content.height())));else e._trackVert&&e._trackVert.visible(!1);if(e._rules.scrollX)if(!e._trackHorz){var i=t(Math.max(30,e._holder.width()*(e._holder.width()/e._content.width())),e._thickness,e._thickness);i.y(e._holder.height()-i.height()-4-e._scrollOffsetY),i.x(4),e._element.addChild(i),e._trackHorz=i,n(e._trackHorz,"x","width","distanceX","_scrollOffsetX","scrollLeft","scrollWidth")}else e._trackHorz.width(Math.max(30,e._holder.width()*(e._holder.width()/e._content.width())));else e._trackHorz&&e._trackHorz.visible(!1);if(!e._initialized&&e._rules.scrollY||e._rules.scrollX)e._options.hide?(e._element.bind(ot.events.MOUSE_OVER,function(){e._trackVert&&e._trackVert.visible(!0),e._trackHorz&&e._trackHorz.visible(!0)}),e._element.bind(ot.events.MOUSE_OUT,function(){e._trackVert&&!e._dragging&&e._trackVert.visible(!1),e._trackHorz&&!e._dragging&&e._trackHorz.visible(!1)})):(e._trackVert&&e._trackVert.visible(!0),e._trackHorz&&e._trackHorz.visible(!0))},_firefoxLengthAdjustment:function(e){var t=this;w.mozilla&&E.mac&&(e==="x"&&t._scrollOffsetX===0?t._scrollOffsetX=16:e==="y"&&t._scrollOffsetY===0&&(t._scrollOffsetY=16))}},{events:{SCROLL_START:"scrollstart",SCROLL:"scroll",SCROLL_END:"scrollend"},helper:function(){var e=new vt("div",{"data-label":"scrollhelper"});return e.x(-100),e.y(-100),e.width(100),e.height(100),e.alpha(0),e.css("background-color","#000"),e}()});(function(){var e=new vt("style",{type:"text/css",id:"flt-scrollbar-style"});e.text(":not(.flt-force-scroll)::-webkit-scrollbar { display: none; overflow: visible; width: 0px; height: 0px;}"),t.getElementsByTagName("body")[0].appendChild(e.dom)})();var yt=vt.extend({constructor:function(e){yt.__super__.constructor.call(this,t.createElement("div"),{"data-label":"spinner"});var n=e&&e.spinnerOptions,r=32,i=12,s=r*.12,o=r*.25,u=r*.445,a=r*.37,f=o*1.42,l=360/i,c=1e3/i,h=n&&n.spinnerColor||"#CCCCCC";this.width(r),this.height(r);for(var p=0;p<i;++p){var d=new vt("div");d.width(s),d.height(o);var v=d.style;v.left=u+"px",v.top=a+"px",v.backgroundColor=X(h),d.css("animation","flt-spinner-fade 1s linear infinite"),d.css("border-radius","5px"),d.css("box-shadow","0 0 3px rgba(0, 0, 0, 0.1)"),d.css("transform","rotate("+(0+l*p)+"deg) translate(0, -"+f+"px)"),d.css("animation-delay",0-(1e3-c*p)+"ms"),this.addChild(d)}n&&n.backgroundColor&&(this.style.backgroundColor=X(n.backgroundColor))}});(function(){var e=new vt("style",{type:"text/css",id:"flt-spinner-style"});e.text("@"+I.stylePrefix+"keyframes flt-spinner-fade { from {opacity: 0.8;} to {opacity: 0;} }"),t.getElementsByTagName("body")[0].appendChild(e.dom)})();var bt=at.extend({_instance:null,_adapter:null,_coverAll:null,constructor:function(e,t){this._instance=e,this._adapter=t,this.openExpansion=this.expansionMethod(r.createExpansion),this.openStage=this.expansionMethod(r.showStage),this._instance.bind("childDestroyed",K(this,this.onStageDestroyed)),o.bind(this.onCoverOver,this)},expansionMethod:function(e){var t=this;return function(n){n=n||{};if(t._adapter||I.touchPreview)n.config=n.config||{},t._adapter&&(n.config.adapter=t._adapter),I.touchPreview&&(n.config.adapter_mode="touchpreview");e(t._instance,n)}},resize:function(e){var t=f({trigger:null,animate:!0,duration:0},e),n=t.width,r=t.height,i=this._instance.view.scaleFactor||1;n>=1&&(n=parseInt(n,10)*i),r>=1&&(r=parseInt(r,10)*i),this._instance.view.resizeContainer(n,r,t)},closeSelf:function(e){var t=this;t._instance.parent||!t._adapter?t._instance.destroy(e):t._instance.view.destroy(e)},closeExpansions:function(e){this._instance.destroyAllChildren(e)},onStageDestroyed:function(e){this.trigger({type:bt.events.STAGE_UNLOADED,triggerSequence:e.metrics.sequence-1,scope:e.stage});if(!I.mobile){var t=bt.cover;t.visible(!0),t.enabled(!0),t.x(0),t.y(0),t.bind(ot.events.MOUSE_OVER,this.onCoverOver)}},onCoverOver:function(){var e=bt.cover;e.visible(!1),e.enabled(!1),e.x(-bt.rect.width),e.y(-bt.rect.height),e.unbind(ot.events.MOUSE_OVER,this.onCoverOver)}},{events:{STAGE_UNLOADED:"stageunloaded"},cover:function(){var e=new vt("div",{"data-label":"cover"});return e.x(-100),e.y(-100),e.width(100),e.height(100),e.alpha(0),e.css("background-color","#000"),e}(),rect:{}}),wt=it.extend({_info:null,_values:null,constructor:function(e,t){if(!e)throw"No Info";this._info=e,this._values={},t&&f(wt.variables,Q(this._info))},getValue:function(e,t){var n=this;if(n._values[e])return n._values[e];var r=G(n._info,"configParams."+e.replace(/\./g,"\\."));r=r&&(n._info.configParams[e].valueMap||n._info.configParams[e].value);if(L.s===typeof r&&(r.indexOf("{")===0||r.indexOf("[")===0))try{r=JSON.parse(r)}catch(i){}return r=r||n._info[e],t||(r=this._replaceVariables(r)),t||n.setValue(e,r),r},setValue:function(e,t){this._values[e]=t},getInt:function(e){return parseInt(this.getValue(e),10)},getFloat:function(e){return parseFloat(this.getValue(e))},getBoolean:function(e){return V(this.getValue(e))},getDataId:function(){return this.getValue("wbx.dataApiKey")},getColor:function(e){var t=this.getValue(e);return t&&(t=X(t)),t},getFont:function(e){var t=this.getValue(e);return t&&t.css},_replaceVariables:function(e){var t=typeof e;if(t===L.u)return;try{t!==L.s?t===L.o&&e.__varParsed__!==wt.parsedFlag&&(e.__varParsed__=wt.parsedFlag,a(e,function(t,n){e[n]=this._replaceVariables(t)},this)):e=o.variableReplacement(e,wt.variables)}catch(n){}return e}},{variables:{},parsedFlag:+(new Date)}),Et={heroMap:{},sequenceMap:{},fnMap:{},decorateContentData:function(e,t){if(t&&t.group){var n=t.group,r=t.position;this.heroMap[n]?t.hero=this.heroMap[n]:this.heroMap[n]=t.name,this.sequenceMap[n]&&this.sequenceMap[n][r]&&this.sequenceMap[n][r][e]?(t.sequence=this.sequenceMap[n][r][e],this.sequenceMap[n][r][e]++):(this.sequenceMap[n]||(this.sequenceMap[n]={}),this.sequenceMap[n][r]||(this.sequenceMap[n][r]={}),t.sequence=0,this.sequenceMap[n][r][e]=1)}},logContentEvent:function(e,t){e&&e.group&&t&&(this.fnMap[e.group]||(this.fnMap[e.group]=o.debounce(function(e,t){t.logContent({subtype:St.subtype.CONTENT_VIEW,detail:e.name,contentData:e})},500,!0)),this.fnMap[e.group](e,t))}},St=it.extend({_instance:null,_adapter:null,_enabled:!0,_sequence:0,_iframe:null,_iframeName:null,constructor:function(e,t){this._instance=e,this._adapter=t,this._enabled=!u(["edit","test","preview"],this._adapter),this.logInteraction=this._generateLogger("metrics:logInteraction"),this.logContent=this._generateLogger("metrics:logContent"),this.logNotation=this._generateLogger("metrics:logNotation"),this.logVideo=this._generateLogger("metrics:logVideo"),this.sendTracker=this._sendTracker},_generateLogger:function(e){var t=this;return function(n){return t._enabled?(t._sequence=t._instance.metrics.sequence,n=f({},n),n.contentData&&Et.decorateContentData(e,n.contentData),t._instance.trigger(e,n)):t._sequence++,t._sequence}},_sendTracker:function(e){m.loadImageTrackingUrl(m.replaceAllTokens(this._instance,e),null,!0)}},{type:g.EventTypes,mode:g.EventModes,subtype:g.EventSubtypes,videotype:g.VIDEO_TYPES}),xt=it.extend({_metrics:null,id:null,component:null,type:null,constructor:function(e,t,n,r){this._metrics=e,this.id=t,this.type=L.u===typeof n?St.type.IMPRESSION:n,this.component=r},clone:function(e,t,n){return new xt(this._metrics,e||this.id,t||this.type,n||this.component)},logInteraction:function(e){e=f(e,{component:this.component});if(L.u===typeof e.subtype||!$(e.subtype,20,39,!0))throw"Invalid subtype";L.u===typeof e.mode&&(e.mode=St.mode.UNKNOWN),this.type===St.type.CONTENT&&(e=f(e,{context:this.id}));var t=this._metrics.logInteraction(e);return this.clone(t,St.type.INTERACTION)},logContent:function(e){e=f(e,{component:this.component});if(L.u===typeof e.subtype||!$(e.subtype,40,59,!0))throw"Invalid subtype";u([St.type.INTERACTION,St.type.IMPRESSION],this.type)&&(e=f(e,{trigger:this.id}));var t=this._metrics.logContent(e);return this.clone(t,St.type.CONTENT)},logNotation:function(e){e=f(e,{component:this.component,context:this.id});if(L.u===typeof e.subtype||!$(e.subtype,60,79,!0))throw"Invalid subtype";this._metrics.logNotation(e)},logVideo:function(e){e=f(e,{component:this.component}),u([St.type.INTERACTION,St.type.IMPRESSION],this.type)&&(e=f(e,{trigger:this.id}));if(L.u===typeof e.subtype||!$(e.subtype,80,99,!0))throw"Invalid subtype";this._metrics.logVideo(e)}}),Tt=at.extend({dataId:null,schema:null,form:null,counter:null,_data:null,_instance:null,constructor:function(e,t){var n=this;this.dataId=e,this._instance=t;var r={POST:function(e,t){var n=this,r=function(e){n._data=e,t&&n._logNotation(t,e.success),n.trigger({type:e.success?Tt.events.COMPLETE:Tt.events.ERROR,response:e},!0)},i=y.getDataUrl(y.dataApiEndpoints.FORM_POST,n.getOptions({data:e},r));S.loadUncachedScript(i,null,null)}},i={INCR:function(e,t){var n=this,r=function(e){n._data=e,t&&n._logNotation(t,e.success),n.trigger({type:e.success?Tt.events.COMPLETE:Tt.events.ERROR,response:e},!0)},i=y.getDataUrl(y.dataApiEndpoints.COUNTER_INCR,n.getOptions({schema:JSON.stringify(n.schema),label:e},r));S.loadUncachedScript(i,null,function(){n.trigger({type:Tt.events.ERROR},!0)})},GET:function(e){var t=this,n=function(e){t._data=e,t.trigger({type:e.success?Tt.events.COMPLETE:Tt.events.ERROR,response:e},!0)},r=y.getDataUrl(y.dataApiEndpoints.COUNTER_GET,t.getOptions({data:{labelId:e}},n));S.loadUncachedScript(r,null,function(){t.trigger({type:Tt.events.ERROR},!0)})}};r.POST=K(n,r.POST),i.INCR=K(n,i.INCR),i.GET=K(n,i.GET),n.form=r,n.counter=i},getOptions:function(e,t){var n=this;return f(e||{},{dataId:n.dataId,schema:JSON.stringify(n.schema),regId:n._instance.getConfig().regId,appId:n._instance.getConfig().appId,isPreviewInstance:n._instance.getConfig().isPreviewInstance,sid:n._instance.sessionId,callback:S.getCallbackName(t)})},setSchema:function(e){this.schema=e},_logNotation:function(e,t){var n=isNaN(t)?this._data.success:Boolean(t),r={bucketid:this.dataId,success:n};n||(r.message=Tt.DEFAULT_IO_ERROR),e.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"Data Submitted",eventData:r})}},{DEFAULT_IO_ERROR:"Failed to access remote data URL",events:{COMPLETE:"oncomplete",ERROR:"onerror"}}),Nt=at.extend({_states:null,_triggers:null,_nodes:null,_baseTrigger:null,constructor:function(e){this._states={},this._triggers={},this._nodes={},this._baseTrigger=e},trackNode:function(e){e&&e.id&&L.u===typeof this._states[e.id]&&(this._states[e.id]=Nt.states.DISABLED,this._triggers[e.id]=this._baseTrigger,this._nodes[e.id]=e)},getState:function(e){return e&&L.u!==typeof this._states[e]&&this._states[e]||Nt.states.UNKNOWN},getStateTrigger:function(e){return e&&L.u!==typeof this._triggers[e]&&this._triggers[e]||this._baseTrigger},setState:function(e,t,n){if(e&&L.u!==typeof this._states[e]&&L.n===typeof t&&this._states[e]!==t){n=n||this.getStateTrigger(e);var r=this._getStateBranch(e,t);a(r,function(e){var r=this._nodes[e];this._states[e]=t,this._triggers[e]=n.clone(null,null,r.component||e)},this),this.trigger({type:Nt.events.STATE_CHANGE,branch:r,state:t,trigger:n})}},_getStateBranch:function(e,t){var n=[];L.u!==typeof this._states[e]&&n.push(e);var r=this._nodes[e];if(t===Nt.states.ENABLED)r.parent&&this._nodes[r.parent]&&r.parent!==e&&(n=this._getStateBranch(r.parent,t).concat(n));else if(t===Nt.states.DISABLED||t===Nt.states.UNLOADED)if(r.children&&p(r.children).length>0){var i=p(r.children);a(i,function(e){var i=r.children[e];i&&a(i,function(e){n=this._getStateBranch(e.id,t).concat(n)},this)},this)}return n}},{states:{UNKNOWN:-1,ENABLED:1,DISABLED:2,PRELOADED:3,UNLOADED:4},events:{STATE_CHANGE:"statechange",LOADED:"loaded"}}),Ct=it.extend({animation:null,dom:null,environment:null,factory:null,messenger:null,meta:null,metrics:null,net:null,script:null,state:null,urls:null,util:null,window:null,constructor:function(t,n){var i=n.getStateManager(),u=n.getInstance(),a=u.guid,l=this;l.animation={events:f({},mt.events),getAnimation:K(n,n.getAnimation),requestAnimationFrame:mt.requestAnimationFrame,cancelAnimationFrame:mt.cancelAnimationFrame},l.dom={events:f({},ot.events,gt.events),getElement:K(n,n.getElement),makeScrollable:K(n,n.getScroller),getIframe:function(e,t){return n.getIframe(t,e)}},l.environment={editor:I.editor,studio:I.studio,auto:(!I.mobile||I.mraid)&&!I.editor,touch:I.touch||I.touchPreview,location:I.location,mobile:I.mobile,prefix:I.prefix,retina:I.retina,stylePrefix:I.stylePrefix,secure:I.secure,coppa:I.coppa,screenshot:I.screenshot,mraid:I.mraid,vpaid:I.vpaid},l.factory={getAnimation:l.animation.getAnimation,getContainer:function(e,r){if(e){var i=n.getComponentDefinition(e.component);return e.type&&e.type==="part"||i&&i.type&&i.type.toLowerCase()==="part"?t.part.call(t,e,r):n.getContainer.call(n,e,r)}},getContainerById:K(n,n.getContainerById),getPartName:K(n,n.getPartName),getPartConfig:K(n,n.getPartConfig),getSpinner:K(n,n.getSpinner),getData:K(n,n.getData),getVideoManager:K(n,n.getVideoManager),getVideoDispatcher:K(n,n.getVideoDispatcher)},l.messenger=n.getMessenger(),l.meta={adId:u.config.regId,placementId:a},l.metrics={subtype:St.subtype,videotype:St.videotype,mode:St.mode};var c=["count"],h=function(e,t,n){var r={count:25,endpoint:"userTimeline",user:e,callback:S.getCallbackName(t)};n=f(r,n),S.loadUncachedScript(y.getProxiedTwitterUrl(f(n,{instanceGuid:a})))},p=["max"],v=function(e,t,n){var r={max:20,id:e,callback:S.getCallbackName(t)};n=f(r,n),S.loadUncachedScript(y.getProxiedFacebookUrl(f(n,{instanceGuid:a})))},g=function(e,t){var n={};return e&&t&&(n=o.pick.apply(null,[t].concat(e))),n},b=function(e,t,n){n=f({json:!1,minify:!1,raw:!0,callback:S.getCallbackName(t)},n),S.loadUncachedScript(y.getProxiedFeedUrl(e,f(n,{instanceGuid:a})))},w=function(e){if(r&&r.externalData&&r.externalData.geo)setTimeout(function(){e(r.externalData.geo)},0);else{var t={callback:S.getCallbackName(e)};S.loadUncachedScript(y.getGeoLocationURL(f(t,{instanceGuid:a})))}};this.net={cookies:{deleteCookie:o.deleteCookie,getCookie:o.getCookie,setCookie:o.setCookie,available:o.cookiesEnabled},open:function(e,t,r,i){e=n.getClickthroughUrl({url:e,trigger:r&&r.id,component:r&&r.component,detail:e}),e&&u.view.openWindow(e,t,i)},proxyFeed:function(e,t,n){n=f({json:!0,minify:!0,raw:!1},n),b(e,t,n)},proxyManagedContent:function(e,t){b(y.getManagedContentUrl(e),t,{json:!0})},proxy:function(e,t,n){b(e,t,n)},twitter:{requestTimeline:function(e,t,n){h(e,t,g(c,n))},requestFilteredTimeline:function(e,t,n,r){h(e,n,f(g(c,r),{endpoint:"userSearch",search:t}))},requestSingleTweet:function(e,t,n){h(e,n,{endpoint:"singleTweet",id:t})}},facebook:{requestFeed:function(e,t,n){v(e,t,g(p,n))}},share:f(function(e,t,r){var i=n.getShareUrl(f(t,{url:e}));i&&u.view.openWindow(i,"_blank",r)},{services:{TWITTER:"TWITTER",TWITTER_RETWEET:"TWITTER_RETWEET",LINKEDIN:"LINKED_IN"}}),geo:{getLocation:w},ext:{geo:{getLocation:w},weather:{getWeather:function(e){if(r&&r.externalData&&r.externalData.weather)setTimeout(function(){e(r.externalData.weather)},0);else{var t={callback:S.getCallbackName(e)};S.loadUncachedScript(y.getWeatherLocationURL(f(t,{instanceGuid:a})))}}}},events:Tt.events},l.script={isScriptLoaded:K(S,S.isScriptLoaded),loadScript:function(e,t){return S.loadScript(y.getProxiedFeedUrl(e,{raw:!0,minify:!1}),t)},loadWindowedScript:function(e,t){return S.loadWindowedScript(y.getProxiedFeedUrl(e,{raw:!0,minify:!1}),t)},jsonp:function(e,t){return S.loadUncachedScript(y.getProxiedFeedUrl(e,{json:!0,raw:!0,minify:!1,callback:S.getCallbackName(t)}))}},l.state={ENABLED:Nt.states.ENABLED,DISABLED:Nt.states.DISABLED,PRELOADED:Nt.states.PRELOADED,UNLOADED:Nt.states.UNLOADED,getState:K(i,i.getState),setState:K(i,i.setState),events:Nt.events},l.video={events:pt.events},l.urls=f(r.URLS,y),l.urls.getProxiedImageUrl=function(e,t){return y.getProxiedImageUrl(e,f(t,{instanceGuid:a}))},l.urls.getProxiedFeedUrl=function(e,t){return y.getProxiedFeedUrl(e,f(t,{instanceGuid:a}))},l.urls.getProxiedTwitterUrl=function(e){return y.getProxiedTwitterUrl(f(e,{instanceGuid:a}))},l.urls.getGeoLocationURL=function(e){return y.getGeoLocationURL(f(e,{instanceGuid:a}))},l.urls.replaceMacros=function(e){return m.replaceAllTokens(u,e)},l.util={setInterval:e.setInterval,clearInterval:e.clearInterval,setTimeout:e.setTimeout,clearTimeout:e.clearTimeout,delegate:K,hexToRgba:W,inRange:$,parseBoolean:V,extend:f,values:d,_:o},l.token=s.token,l.window={EVENTS:nt.EVENTS,bind:K(nt,nt.bind),unbind:K(nt,nt.unbind),top:o.getExpandableWindow(),getZoom:K(dt,dt.getZoom)},l.stage={EVENTS:dt.EVENTS,bind:K(dt,dt.bind),unbind:K(dt,dt.unbind),getZoom:K(dt,dt.getZoom),isViewable:K(dt,dt.isViewable)},l.vpaid=n.getVPAID()}}),kt=vt.extend({_node:null,_state:null,_trigger:null,_stateManager:null,_factory:null,_geometryLock:!1,visibilityEnabled:null,label:null,constructor:function(e,n,r){var i=this;r=r||t.createElement("div"),r.id=r.id||e.id,kt.__super__.constructor.call(i,r,{"data-label":"container","data-layer":e.label||e.id}),i._setVisible(!1),i._node=e,i._factory=n,i._stateManager=n.getStateManager(),i._state=this._stateManager.getState(e.id),i._trigger=this._stateManager.getStateTrigger(e.id),i.elementAlpha=i.alpha,i.alpha=i.containerAlpha,i.style.borderStyle="solid",i.style.borderWidth="0px",i._node.overflow&&(i.style.overflow=i._node.overflow),i.label=e.label,I.editor||i._factory.getActionController().register(i),i.visibilityEnabled=i._state===Nt.states.ENABLED||e.visibility!=="hidden",i.draw(e),i.visible(this.visibilityEnabled),I.editor&&i.enabled(!1),i._state===Nt.states.ENABLED&&i.trigger({type:Nt.events.STATE_CHANGE,state:i._state,trigger:i._trigger})},getProperty:function(){return!1},update:function(e){"component"in e&&delete e.component;var t={};this._geometryLock&&(t={width:this._node.width,height:this._node.height,x:this._node.x,y:this._node.y}),f(this._node,e);for(var n in t)this._node[n]=t[n];this.label=this._node.label,this._factory.getActionController().tearDownActions(this),I.editor||this._factory.getActionController().register(this),this.draw(this._node)},reload:function(e){var t=this._factory.getComponentDefinition(this._node.component);if(t){f(t.localConfig,e);if(t.info&&t.info.configParams){var n={};for(var r in e){if(!e.hasOwnProperty(r))continue;n[r]={name:r,value:e[r]}}f(t.info.configParams,n)}}this._stateManager.setState(this._node.id,Nt.states.DISABLED),this._stateManager.setState(this._node.id,Nt.states.UNLOADED)},draw:function(e){e=f({},e);var t=L.u!==typeof e.borderThickness&&L.u!==typeof e.borderColor&&parseFloat(e.borderThickness)>0&&e.borderColor!=="";if(t){var n=Math.min(e.width,e.height)/2;e.borderThickness>n&&(e.borderThickness=n)}else e.borderThickness=0;e.width=t?e.width-e.borderThickness*2:e.width,e.height=t?e.height-e.borderThickness*2:e.height,a(N,function(t){this[t]&&L.u!=typeof e[t]&&this[t].call(this,e[t])},this);if(L.u!==typeof e.backgroundAlpha&&L.u!==typeof e.backgroundColor){var r=W(X(e.backgroundColor),e.backgroundAlpha);r&&(e.backgroundColor="rgba("+r.join(",")+")")}else e.backgroundColor=X(e.backgroundColor);t&&(e.borderThickness.indexOf("px")===-1&&(e.borderThickness=e.borderThickness+"px"),e.borderColor=X(e.borderColor)),e.cornerRadius&&e.cornerRadius.indexOf("px")===-1&&(e.cornerRadius=e.cornerRadius+"px"),a(C,function(t){var n=k[t]||t;L.u!=typeof e[t]&&this.css(n,e[t])},this)},_setVisible:function(e){kt.__super__.visible.call(this,e)},geometryLock:function(e){return L.u!==typeof e&&(this._geometryLock=e),this._geometryLock},stateChange:function(e){if(this._state!==e.state){this._state=e.state;var t=e.trigger;t&&(this._trigger=t,t=t.clone(null,null,this._node.component||this._node.id),e.trigger=t),this._checkState(),this._node.contentData&&this._state===Nt.states.ENABLED&&Et.logContentEvent(this._node.contentData,this._trigger)}},_checkState:function(){var e=this._stateManager&&this._stateManager.getState(this._node.id);if(this._state===Nt.states.ENABLED||e===Nt.states.ENABLED)this.visibilityEnabled=!0},containerAlpha:function(e){return e>this._node.alpha?this.elementAlpha(this._node.alpha):this.elementAlpha(e)},visible:function(e,t,n,r){var i=this;i._checkState();if(L.u!=typeof e&&this.visibilityEnabled){var s=this._visible;if(e!=s){var u=t;if(!u){var f=o.find(this._node.animations,function(t){return e?t.trigger==="visibilityshown":t.trigger==="visibilityhidden"});f&&(u=f.options)}if(I.editor||!u)this.animation&&this.animation.cease(),this.animation=this._factory.getAnimation(this),this._setVisible(e),e&&this.alpha(L.u===typeof this._node.alpha?1:this._node.alpha),n&&n();else{this.animation&&this.animation.cease(),this.animation=this._factory.getAnimation(this,u.duration*1e3,u.easing.ease),this.animation.bind(mt.events.COMPLETE,function(e){i._visible||i._setVisible(!1),n&&n()}),this.animation.bind(mt.events.CANCELLED,function(e){i._visible||i._setVisible(!1),r&&r()});if(e){if(u.from){var l=p(u.from);a(l,function(e){L.f===typeof this[e]&&this[e](u.from[e])},this)}this._setVisible(!0)}this.animation.run({from:u.from,to:u.to})}this._visible=e,this.trigger({type:kt.events.VISIBILITY_CHANGE,visible:e})}else n&&n()}return this._visible},type:function(){return this._node.type}},{events:{VISIBILITY_CHANGE:"container_visibilitychange"}}),Lt=kt.extend({childHolder:null,childNodes:null,children:null,childVisible:null,nodeVisibility:null,scroll:null,rendered:!1,hasTriggeredLoaded:!1,hasChangedChildState:!1,preloaded:!1,preloadedChildren:null,spinner:null,offsets:null,constructor:function(e,n,r){Lt.__super__.constructor.call(this,e,n,r),this.preloaded=e.id!=="__MAIN__"||I.editor,this.preloadedChildren=[],this.childNodes=e.children&&e.children.nodes||[],this.children={},this.childVisible={},this.nodeVisibility={},this.offsets={x:0,y:0,width:this.width(),height:this.height()},this.childHolder=this._factory.getElement(t.createElement("div"),{"data-label":"view-children"}),this.childHolder.style.position="relative",this.childHolder.width(e.width),this.childHolder.height(e.height),this.addChild(this.childHolder),this._calculateOffsets(),this.childHolder.x(this.offsets.x),this.childHolder.y(this.offsets.y),this.childHolder.width(this.offsets.width),this.childHolder.height(this.offsets.height),this._handleScroll=K(this,this._handleScroll),this._reducePreload(),this.preloaded||(this.spinner=this._factory.getSpinner(),this.spinner.x(.5*(this.width()-this.spinner.width())),this.spinner.y(.5*(this.height()-this.spinner.height())),this.addChild(this.spinner))},stateChange:function(e){var t=this._state;Lt.__super__.stateChange.call(this,e),this._state===Nt.states.ENABLED||this._state===Nt.states.PRELOADED?(this.rendered||(this.rendered=!0,a(this.childNodes,this._doLayout,this),this._scrollCheck()),this.preloaded||this._checkPreload()):this._state===Nt.states.DISABLED&&a(this.children,function(e,t){this.childVisible[t]=e.visible()},this);if(this._state!==t||this._state===Nt.states.ENABLED&&!this.hasChangedChildState)this.preloaded?(a(this.childNodes,this._doChangeState,this),this._triggerLoaded()):this._checkPreload();if(e.child&&e.child.state===Nt.states.ENABLED){var n=this.children[e.child.key];n&&n.visible(!0)}this._state!==t&&this.trigger({type:Nt.events.STATE_CHANGE,state:this._state,trigger:e.trigger})},update:function(e){Lt.__super__.update.call(this,e),this.childHolder.width(this.offsets.width),this.childHolder.height(this.offsets.height),this._scrollCheck()},visible:function(e,t,n,r){var i=Lt.__super__.visible.call(this,e,t,n,r);return i},enabled:function(e){var t=Lt.__super__.enabled.call(this,e);return t},_triggerLoaded:function(){!this.hasTriggeredLoaded&&this.preloaded&&this.rendered&&(this.hasTriggeredLoaded=!0,this.trigger({type:Nt.events.LOADED}))},_setPointerEvents:function(){this.style.pointerEvents=this._node&&this._node.id==="__MAIN__"||this.visible()&&this.enabled()&&this.style.overflow!==A.v&&this._isGestureBound()?"auto":"none",this.childHolder&&(this.childHolder.style.pointerEvents=this.style.pointerEvents)},_scrollCheck:function(){if(this.childHolder){var e=this._node&&this._node.overflow;e&&e!==""&&e!==A.h?e===A.v?(this.style.overflow=A.v,this._disableScroll()):e===A.a?(this.style.overflow=A.h,this._enableScroll()):(this._disableScroll(),this.style.overflow=e):(this._disableScroll(),this.style.overflow=A.h,this.childHolder.x(this.offsets.x),this.childHolder.y(this.offsets.y)),this.childHolder.style.overflow=this.style.overflow,this._setPointerEvents()}},_enableScroll:function(){this.childHolder.x(0),this.childHolder.y(0),this.scroll?this.scroll.enable():(this.scroll=this._factory.getScroller(this,{initialPosition:{x:this.offsets.x,y:this.offsets.y}}),this.scroll.bind(gt.events.SCROLL_END,this._handleScroll))},_disableScroll:function(){this.childHolder.x(this.offsets.x),this.childHolder.y(this.offsets.y),this.scroll&&this.scroll.disable()},_doLayout:function(e){var t=this;t.nodeVisibility[e.id]=e.visibility,t.preloaded||(e.visibility="hidden");var n=t._factory.getContainer(e);t.children[e.id]=n,t.childHolder.addChild(n),n.offsetX(Math.abs(t.offsets.x)),n.offsetY(Math.abs(t.offsets.y)),t.preloaded||(J(n,At)&&n.getProperty("supportsPreload")&&t.nodeVisibility[e.id]!=="hidden"?(n.addExternalListener(Nt.events.LOADED,K(t,t._handleChildComplete)),t._stateManager.setState(e.id,Nt.states.PRELOADED)):t.preloadedChildren.push(n.id))},_doChangeState:function(e){this.hasChangedChildState=!0;var t=this.children[e.id];t&&t.visibilityEnabled&&this.childVisible[e.id]!==!1&&this._stateManager.setState(e.id,this._state,this._trigger)},_handleScroll:function(e){this._trigger.logInteraction({subtype:St.subtype.INTERACTION_SCROLL,mode:St.mode.DRAG,detail:this._node.label,eventData:e.info})},_handleChildComplete:function(e){e.target.unbind(e.type,arguments.callee),this.preloadedChildren.push(e.target.id),this._checkPreload()},_doSetVisibility:function(e,t){e.visible(!0),this.childVisible[t]=e.visible()},_reducePreload:function(){var e=this;e.preloaded=e.preloaded||o.reduce(e.childNodes,function(t,n){var r=n.component,i=!1;if(r){var s=e._factory.getComponentDefinition(r);i=G(s,"info.scriptContent.flite.properties.supportsPreload")}return t&&!i},!0)},_checkPreload:function(){if(!this.preloaded&&this.preloadedChildren.length===this.childNodes.length){this.preloaded=!0,this.spinner&&(this.removeChild(this.spinner),this.spinner=null);var e=d(this.children);a(e,function(e){var t=e._node.id;e.visibilityEnabled=e.visibilityEnabled||this._state===Nt.states.ENABLED&&this.nodeVisibility[e._node.id]!=="hidden",(e.visibilityEnabled||this.nodeVisibility[e._node.id]!=="hidden")&&this._doSetVisibility(e,t)},this),a(this.childNodes,this._doChangeState,this),this._triggerLoaded()}},_calculateOffsets:function(){a(this.childNodes,function(e,t,n){this.offsets.x=Math.min(this.offsets.x,e.x),this.offsets.y=Math.min(this.offsets.y,e.y)},this),this.offsets.width=-1*this.offsets.x+this.offsets.width,this.offsets.height=-1*this.offsets.y+this.offsets.height,a(this.childNodes,function(e,t,n){this.offsets.width=Math.max(this.offsets.width,-1*this.offsets.x+e.x+e.width),this.offsets.height=Math.max(this.offsets.height,-1*this.offsets.y+e.y+e.height)},this)}}),At=kt.extend({external:null,reloadTimeout:null,lastMethod:null,constructor:function(e,t,n){At.__super__.constructor.call(this,e,t,n)},load:function(e){},addExternal:function(e,n){return this.external=this._factory.getElement(t.createElement("div"),{"data-label":n},e),this.external.css({position:"relative",overflow:this.style.overflow}),this.css("borderRadius")?this.external.css("borderRadius",this.css("borderRadius")-this._node.borderThickness+"px"):this.external.css("borderRadius","0px"),this.external.width(this.width()),this.external.height(this.height()),this.addChild(this.external),this.external},update:function(e){var t=this.width(),n=this.height();At.__super__.update.call(this,e);if(this.external){this.external.width(this.width()),this.external.height(this.height()),this.css("borderRadius")?this.external.css("borderRadius",this.css("borderRadius")-this._node.borderThickness+"px"):this.external.css("borderRadius","0px");if(t!==this.width()||n!==this.height())this.external.flite&&this.external.flite.resize?this.external.flite.resize.call(this.external,{width:this.width(),height:this.height()}):(clearTimeout(this.reloadTimeout),this.reloadTimeout=setTimeout(K(this,function(){this.reload()}),200))}},reload:function(e){var t=this._state;At.__super__.reload.call(this,e),this.external&&(this.removeChild(this.external),this.external=null,this.load(this._node),this._stateManager.setState(this._node.id,t))},stateChange:function(e){var t=this._state;At.__super__.stateChange.call(this,e),this.external&&this.external.flite&&this.external.flite.stateChange&&this.external.flite.stateChange.call(this.external,e),this._state===Nt.states.ENABLED&&this.lastMethod&&this.external?(this.callExternalFn(this.lastMethod.name,this.lastMethod.args,this.lastMethod.metricsHelper,this.lastMethod.triggerData),this.lastMethod=null):this._state===Nt.states.DISABLED&&(this.lastMethod=null),this._state!==t&&this.trigger({type:Nt.events.STATE_CHANGE,state:this._state,trigger:e.trigger})},getProperty:function(e){return this.external&&G(this.external,["flite","properties",e].join("."))},cloneNodeLists:function(e){var t={};return a(e,function(e,n){t[n]=e.slice(0)}),t},callExternalFn:function(e,t,n,r){if(this._state===Nt.states.ENABLED&&this.external&&this.external.flite&&this.external.flite[e]){try{t=(t||[]).concat([n,r]),this.external.flite[e].apply(this.external,t)}catch(i){}this.lastMethod&&(this.lastMethod=null)}else this.lastMethod={name:e,args:t,metricsHelper:n,triggerData:r}},addExternalListener:function(e,t){if(this.external)try{this.external.bind(e,t)}catch(n){}},removeExternalListener:function(e,t){if(this.external&&this.external.bound(e))try{this.external.unbind(e,t)}catch(n){}}},{events:{ENABLED:"wrapper_enabled"}}),Ot=At.extend({name:null,component:null,definition:null,constructor:function(e,t,n,r,i){Ot.__super__.constructor.call(this,e,t,n),this.definition=r,this.component=i,this.load(e)},load:function(e){var t=this;if(e&&t.definition){var n=t._factory.getComponentDefinition(e.component);t.name=n&&n.partName;var r=vt.extend(t.definition);t.external=t.addExternal(r,"part");var i=p(t.definition);a(i,function(e){e!=="flite"&&!(e in t)&&(L.f===typeof t.external[e]&&(t.external[e]=K(t.external,t.external[e])),Object.defineProperty(t,e,{get:function(){return t.external[e]},set:function(n){t.external[e]=n}}))},t),t.trigger({type:At.events.ENABLED});var s=new wt(n&&n.localConfig||{});if(t.external.flite){var o=t.cloneNodeLists(e.children||{});t.external.flite.initialize.call(t.external,{api:new Ct(t.component,t._factory),buckets:o,containers:o,config:s,label:t._node.label,id:t._node.id,name:t.name,component:t.component.external,rectangle:{x:0,y:0,width:t.width(),height:t.height()}})}}}}),Mt=At.extend({partDefinitions:null,componentListeners:null,constructor:function(e,t,n){Mt.__super__.constructor.call(this,e,t,n),this.componentListeners={},this.partDefinitions={},this.load(e)},load:function(e){var t=this,n=t._factory.getComponentDefinition(e.component);if(n&&n.guid&&n.info&&n.info.scriptContent){var r=n.guid,i=Mt.components[r]||(Mt.components[r]=vt.extend(n.info.scriptContent));t.external=t.addExternal(i,"component"),t.trigger({type:At.events.ENABLED});if(t.external.flite){var s=t.external.flite.parts;if(s){var o=p(s);a(o,function(e){t.partDefinition(e,s[e])},t)}if(t.external.flite.initialize){var u=t.cloneNodeLists(e.children||{});t.external.flite.initialize.call(t.external,{api:new Ct(t,t._factory),buckets:u,containers:u,config:new wt(n.info),label:t._node.label,id:t._node.id,rectangle:{x:0,y:0,width:t.width(),height:t.height()}})}t.stateChange({state:t._state,trigger:t._trigger})}}},stateChange:function(e){Mt.__super__.stateChange.call(this,e)},partDefinition:function(e,t){return L.u!==typeof t&&(this.partDefinitions[e]=t),this.partDefinitions[e]},part:function(e,t){var n=this._factory.getPartName(e),r=new Ot(e,this._factory,t,this.partDefinition(n),this);return Rt.containers[e.id]=r,r}},{components:{}}),_t={_messages:[],register:function(e){this._messages.push(e)},dispatchMessage:function(e,t,n,r){a(this._messages,function(i){e!==i&&i.receive(t,n,r)})}};r.MessageBus&&r.MessageBus.registerGlobalMessageHandler(o.bind(_t.dispatchMessage,_t));var Dt=it.extend({_instance:null,ACTIONS:{PLAY:"_playVideo",PAUSE:"_pauseVideo",RESUME:"_resumeVideo",MUTE:"_muteVideo",UNMUTE:"_unmuteVideo",SET:"_setVideo",POSITION:"_positionVideo"},constructor:function(e){var t=this;this._instance=e,this._vpaid=this._instance&&this._instance.supports&&this._instance.supports.vpaid||null,this._videoDispatcher=new lt(t._vpaid)},getVideoDispatcher:function(){return this._videoDispatcher},doAction:function(e,t){e&&this._vpaid&&this._vpaid[e](t)},bind:function(e,t){e&&this._videoDispatcher&&this._videoDispatcher.bind(e,t)}});(function(e){function t(){this._callbacks=[]}function n(e){function o(e){return function(){i+=1,r[e]=Array.prototype.slice.call(arguments),i===s&&n.done(r)}}var n=new t,r=[];if(!e||!e.length)return n.done(r),n;var i=0,s=e.length;for(var u=0;u<s;u++)e[u].then(o(u));return n}function r(e,n){var i=new t;return e.length===0?i.done.apply(i,n):e[0].apply(null,n).then(function(){e.splice(0,1),r(e,arguments).then(function(){i.done.apply(i,arguments)})}),i}t.prototype.then=function(e,n){var r;return this._isdone?r=e.apply(n,this.result):(r=new t,this._callbacks.push(function(){var t=e.apply(n,arguments);t&&typeof t.then=="function"&&t.then(r.done,r)})),r},t.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var e=0;e<this._callbacks.length;e++)this._callbacks[e].apply(null,arguments);this._callbacks=[]};var i={Promise:t,join:n,chain:r};typeof define=="function"&&define.amd?define(function(){return i}):e.promise=i})(this);var Pt=this.promise,Ht;(function(e,t,n){function r(){this.hasDeviceMotion="ondevicemotion"in e,this.hasDeviceOrientation="ondeviceorientation"in e,this.threshold=8,this.orientationThreshold=90,this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null;if(!t.createEvent)return;this.event=t.createEvent("Event"),this.event.initEvent("shake",!0,!0)}r.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,this.lastBeta=null,this.lastGamma=null},r.prototype.start=function(){this.reset(),this.hasDeviceMotion?e.addEventListener("devicemotion",this,!1):this.hasDeviceOrientation&&e.addEventListener("deviceorientation",this,!1)},r.prototype.stop=function(){this.hasDeviceMotion?e.removeEventListener("devicemotion",this,!1):this.hasDeviceOrientation&&e.removeEventListener("deviceorientation",this,!1),this.reset()},r.prototype.deviceorientation=function(t){var r,i,s=0,o=0;if(this.lastBeta===null&&this.lastGamma===null){this.lastBeta=t.beta,this.lastGamma=t.gamma;return}s=n.abs(this.lastBeta-t.beta),o=n.abs(this.lastGamma-t.gamma);if(s>=this.orientationThreshold||o>=this.orientationThreshold)r=new Date,i=r.getTime()-this.lastTime.getTime(),i>1e3&&(e.dispatchEvent(this.event),this.lastTime=new Date)},r.prototype.devicemotion=function(t){var r=t.accelerationIncludingGravity,i,s,o=0,u=0,a=0;if(this.lastX===null&&this.lastY===null&&this.lastZ===null){this.lastX=r.x,this.lastY=r.y,this.lastZ=r.z;return}o=n.abs(this.lastX-r.x),u=n.abs(this.lastY-r.y),a=n.abs(this.lastZ-r.z);if(o>this.threshold&&u>this.threshold||o>this.threshold&&a>this.threshold||u>this.threshold&&a>this.threshold)i=new Date,s=i.getTime()-this.lastTime.getTime(),s>1e3&&(e.dispatchEvent(this.event),this.lastTime=new Date)},r.prototype.handleEvent=function(e){if(typeof this[e.type]=="function")return this[e.type](e)},Ht=new r})(e,t,Math);var Bt=function(e,t){var n=0,r=function(){Bt.dimensions={width:e.innerWidth,height:e.innerHeight}},i="orientation"in e,s="onorientationchange"in e,o="matchMedia"in e;return at.extend({timeout:null,constructor:function(){var t=this,n=function(){try{clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.checkOrientation()},250)}catch(r){e.removeEventListener("orientationchange",n),e.removeEventListener("resize",n)}};s?e.addEventListener("orientationchange",n):e.addEventListener("resize",n)},checkOrientation:function(t){var n=this;r();var s;E.ios&&i?s=e.orientation:(s=Bt.dimensions.width>Bt.dimensions.height?90:0,o&&(e.matchMedia("(orientation: portrait)").matches?s=0:e.matchMedia("(orientation: landscape)").matches&&(s=90))),n.updateOrientation(s,t)},updateOrientation:function(e,r){e=t.floor(t.abs(e)/90);var i=this;if(n!=e||r)n=e,Bt.orientation=n%2===0?"portrait":"landscape",i.trigger({type:Bt.events.ORIENTATION_CHANGE,info:{dimensions:Bt.dimensions,orientation:Bt.orientation}})}},{orientation:"portrait",dimensions:null,events:{ORIENTATION_CHANGE:"devicemotion_orientationchange"}})}(o.getExpandableWindow(),Math),jt=new Bt,Ft=it.extend({_value:null,_pointerData:null,_originalEvent:null,constructor:function(e,t,n){this._value=e,this._pointerData=t,this._originalEvent=n},getValue:function(){return this._value},getPointerData:function(){return this._pointerData},getOriginalEvent:function(){return this._originalEvent}}),It=it.extend({_listeners:null,_triggers:null,_timeouts:null,_delayedMouseOutFns:null,_paths:null,_videoManager:null,_stateManager:null,_stateChangeCallbacks:null,_componentEnabledCallbacks:null,_componentCallbacks:null,_viewabilityCallbacks:null,_scrollCallbacks:null,_pathLoopData:null,_expansion:null,_messengers:null,_svg:null,_svgPaths:null,constructor:function(e,t){this._listeners={},this._triggers={},this._timeouts={},this._delayedMouseOutFns={},this._paths={},this._factory=e,this._videoManager=this._factory.getVideoManager(),this._stateManager=this._factory.getStateManager(),this._stateChangeCallbacks={},this._componentEnabledCallbacks={},this._componentCallbacks={},this._viewabilityCallbacks={},this._scrollCallbacks={},this._pathLoopData={},this._expansion=this._factory.getExpansion(),this._messengers={},this._actions=t,this.addSVGPaths(),o.bindAll(this)},_convertOldActions:function(e){var t=[],n={paths:{},actions:{}};return a(e,function(e){var r=this._convertToNewTrigger(e),i=r.paths[0];t.push(r),n.paths[i]=[];if(e.delay&&e.delay!==""){var s=this._convertToNewAction(e,!0);n.paths[i].push(s.actionId),n.actions[s.actionId]=s.actionObj}var o=this._convertToNewAction(e);n.paths[i].push(o.actionId),n.actions[o.actionId]=o.actionObj},this),{newTriggers:t,newActions:n}},_convertToNewTrigger:function(e){var t={};return t.eventType=e.trigger,e.triggerpayload&&(t.payload=e.triggerpayload),e.triggerduration&&(t.duration=e.triggerduration),t.paths=["path_"+o.generateGuid().substring(0,8)],t},_convertToNewAction:function(e,t){var n="action_"+o.generateGuid().substring(0,8);return t?{actionId:n,actionObj:{payload:e.delay,type:"delay"}}:{actionId:n,actionObj:{payload:e.payload,options:o.clone(e.options),type:e.type}}},register:function(t){var n=this,r=t._node.triggers;typeof r=="string"&&(r=JSON.parse(r));if(!r||!r.length)if(t._node.actions){var i=this._convertOldActions(t._node.actions);r=i.newTriggers,this._actions||(this._actions={paths:{},actions:{}}),this._actions.paths=o.extend(this._actions.paths,i.newActions.paths),this._actions.actions=o.extend(this._actions.actions,i.newActions.actions)}if(r&&r.length>0){n._triggers[t.id]=o.groupBy(r,function(e){return e.eventType});var s=It.triggers;n.setListener(s.TAP,t,t,ot.events.TAP,n.handleTap),n.setListener(s.CLICK,t,t,ot.events.CLICK,n.handleClick),n.setListener(s.SELECT,t,t,ot.events.SELECT,n.handleTapClick),n.setListener(s.MOUSE_OVER,t,t,ot.events.MOUSE_ENTER,n.handleMouseOver),n.setListener(s.MOUSE_OUT,t,t,ot.events.MOUSE_LEAVE,n.handleMouseOut),(n.hasTrigger(s.TAP,t)||n.hasTrigger(s.CLICK,t)||n.hasTrigger(s.SELECT,t))&&t.css("cursor","pointer"),n.setListener(s.SWIPE,t,t,ot.events.SWIPE,n.handleSwipe),n.setListener(s.VISIBILITY_SHOWN,t,t,kt.events.VISIBILITY_CHANGE,n.handleVisibilityShown,!0),n.setListener(s.VISIBILITY_HIDDEN,t,t,kt.events.VISIBILITY_CHANGE,n.handleVisibilityHidden,!0),n._stateChangeCallbacks[t.id]=n.callbackWithContainer(t,n.handleStateChange),t.bind(Nt.events.STATE_CHANGE,n._stateChangeCallbacks[t.id]),n.setListener(s.PINCH,t,t,ot.events.PINCH,n.handlePinch),n.setListener(s.ZOOM,t,t,ot.events.ZOOM,n.handleZoom),n.setListener(s.SHAKE,t,e,s.SHAKE,n.handleShake),n.setListener(s.ORIENTATION_CHANGE,t,jt,Bt.events.ORIENTATION_CHANGE,n.handleOrientationChange),n._messengers[t.id]=n._factory.getMessenger(),n.setListener(s.ON_MESSAGE,t,n._messengers[t.id],ct.events.MESSAGE_RECEIVED,n.handleMessage),n._componentEnabledCallbacks[t.id]=n.callbackWithContainer(t,n.handleComponentEnabled),t.bind(At.events.ENABLED,n._componentEnabledCallbacks[t.id]),n.setListener(s.STAGE_UNLOADED,t,n._expansion,bt.events.STAGE_UNLOADED,n.handleStageUnloaded),this.setViewabilityListeners(!0,t)}},addSVGPaths:function(){this._svgPaths={},this._actions&&a(this._actions.actions,function(e,n){if(e.type==="animate"&&e.options&&e.options.svgCoords){this._svg||(this._svg=t.createElementNS("http://www.w3.org/2000/svg","svg"));var r=t.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",e.options.svgCoords),r.style.stroke="#000",r.style.strokeWidth="1px",this._svg.appendChild(r),this._svgPaths[n]=r}},this)},setListener:function(e,t,n,r,i,s){if(this.hasTrigger(e,t)||s){var o=this.callbackWithContainer(t,i);this._listeners[t.id]=this._listeners[t.id]||[],this._listeners[t.id].push({triggerEvent:e,target:n,tactileEvent:r,callback:o}),n.bind(r,o)}},callbackWithContainer:function(e,t){return function(n){t(n,e)}},hasTrigger:function(e,t){return this._triggers[t.id]&&this._triggers[t.id][e]&&this._triggers[t.id][e].length>0},setComponentListeners:function(e,t){this.hasTrigger(It.triggers.COMPONENT,t)&&J(t,At)&&a(o.uniq(this._triggers[t.id][It.triggers.COMPONENT],!1,function(e){return e.payload}),function(n){if(n.payload)if(e){this._componentCallbacks[t.id]=this._componentCallbacks[t.id]||[];var r=this.callbackWithContainer(t,this.handleComponent);this._componentCallbacks[t.id].push(r),t.addExternalListener(n.payload,r)}else if(this._componentCallbacks[t.id]){var i=this._componentCallbacks[t.id].pop();i&&t.removeExternalListener(n.payload,i)}},this)},setViewabilityListeners:function(e,t){var n=this,r=n._factory.getInstance().view;if(n.hasTrigger(It.triggers.IN_VIEW,t)||n.hasTrigger(It.triggers.OUT_OF_VIEW,t))if(r&&r.getViewabilityCallback){var i=n._triggers[t.id][It.triggers.IN_VIEW]||[],s=n._triggers[t.id][It.triggers.OUT_OF_VIEW]||[];a(i.concat(s),function(i){if(i.options)if(e){n._viewabilityCallbacks[t.id]=n._viewabilityCallbacks[t.id]||[];var s=r.getViewabilityCallback(n.callbackWithContainer(t,function(e,t){n.handleViewability(e,t,i)}),r,i.options);n._viewabilityCallbacks[t.id].push(s),r.addViewabilityListener(s)}else if(n._viewabilityCallbacks[t.id]){var o=n._viewabilityCallbacks[t.id].pop();o&&r.removeViewabilityListener(o)}},n)}if(n.hasTrigger(It.triggers.SCROLL,t)&&r&&r.getScrollPositionCallback){var o=n._triggers[t.id][It.triggers.SCROLL]||[];a(o,function(i){if(i.options)if(e){n._scrollCallbacks[t.id]=n._scrollCallbacks[t.id]||[];var s=r.getScrollPositionCallback(n.callbackWithContainer(t,function(e,t){n.handleViewability(e,t,i)}),r,i.options);n._scrollCallbacks[t.id].push(s),r.addScrollPositionListener(s)}else if(n._scrollCallbacks[t.id]){var o=n._scrollCallbacks[t.id].pop();o&&r.removeScrollPositionListener(o)}},n)}},handleTap:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:St.mode.TOUCH,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.TAP],t,n)},handleClick:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:St.mode.CLICK,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.CLICK],t,n)},handleTapClick:function(e,t){var n=e.info.mode==="mouse"?St.mode.CLICK:St.mode.TOUCH,r=this._stateManager.getStateTrigger(t.id);r=r.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:n,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.SELECT],t,r)},handleMouseOver:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_HOVER,mode:St.mode.ROLLOVER,detail:t._node.label,contentData:t._node.contentData});var r=this._triggers[t.id][It.triggers.MOUSE_OVER];if(r&&r.length>0){var i=function(e){var t=parseFloat(e);return isNaN(t)?0:t},s=c(r,function(e){var t=i(e.duration);return t&&t>0});if(s.length>0){var o=this;a(s,function(e){var r=i(e.duration);this.createTimeout(t,"delayedmouseover",function(){o.startTriggerPath([e],t,n)},r*1e3)},this);var u=this.callbackWithContainer(t,this.handleDelayMouseOut);t.bind(ot.events.MOUSE_OUT,u),this._delayedMouseOutFns[t.id]=u}var f=c(r,function(e){var t=i(e.duration);return!t});this.startTriggerPath(f,t,n)}},createTimeout:function(e,t,n,r){this._timeouts[e.id]||(this._timeouts[e.id]={}),this._timeouts[e.id][t]||(this._timeouts[e.id][t]=[]),this._timeouts[e.id][t].push(setTimeout(n,r))},clearTimeouts:function(e,t){if(t){var n=this._timeouts[e.id][t];n&&n.length>0&&(a(n,function(e){clearTimeout(e)}),this._timeouts[e.id][t]=[])}else a(this._timeouts[e.id],function(t,n){this.clearTimeouts(e,n)},this)},handleDelayMouseOut:function(e,t){tt(e.info.position[0].x,e.info.position[0].y)!==t&&(this.clearTimeouts(t,"delayedmouseover"),t.unbind(ot.events.MOUSE_OUT,this._delayedMouseOutFns[t.id]))},handleMouseOut:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_HOVER,mode:St.mode.ROLLOUT,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.MOUSE_OUT],t,n)},handleSwipe:function(e,t){var n=this._stateManager.getStateTrigger(t.id),r=c(this._triggers[t.id][It.triggers.SWIPE],function(t){return t.payload==="any"||t.payload===e.info.direction});r.length>0&&(n=n.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:St.mode.TOUCH,detail:t._node.label,eventData:{swipe:e.info.direction},contentData:t._node.contentData}),this.startTriggerPath(r,t,n))},handleVisibilityShown:function(e,t){if(e.visible!==!0)return;var n=this._stateManager.getStateTrigger(t.id);this.startTriggerPath(this._triggers[t.id][It.triggers.VISIBILITY_SHOWN],t,n)},handleVisibilityHidden:function(e,t){if(e.visible!==!1)return;var n=this._stateManager.getStateTrigger(t.id);this.startTriggerPath(this._triggers[t.id][It.triggers.VISIBILITY_HIDDEN],t,n)},handleStateChange:function(e,t){if(e.state!==Nt.states.ENABLED&&e.state!==Nt.states.DISABLED)return;e.state===Nt.states.DISABLED&&this.clearTimeouts(t);var n=e.state===Nt.states.ENABLED?It.triggers.STATE_ENABLED:It.triggers.STATE_DISABLED,r=this._stateManager.getStateTrigger(t.id);this.startTriggerPath(this._triggers[t.id][n],t,r)},handlePinch:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:St.mode.TOUCH,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.PINCH],t,n)},handleZoom:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:St.mode.TOUCH,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.ZOOM],t,n)},handleShake:function(e,t){if(t._state!==Nt.states.ENABLED)return;var n=this._stateManager.getStateTrigger(t.id);n=n.logInteraction({subtype:St.subtype.INTERACTION_SELECT,mode:St.mode.MOTION,detail:t._node.label,contentData:t._node.contentData}),this.startTriggerPath(this._triggers[t.id][It.triggers.SHAKE],t,n)},handleOrientationChange:function(e,t){if(t._state!==Nt.states.ENABLED)return;var n=this._stateManager.getStateTrigger(t.id),r=c(this._triggers[t.id][It.triggers.ORIENTATION_CHANGE],function(t){return t.payload==="any"||t.payload===e.info.orientation});r.length>0&&(n=n.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"Orientation Change",eventData:{component:t._node.label,orientation:e.info.orientation},contentData:t._node.contentData}),this.startTriggerPath(r,t,n))},handleMessage:function(e,t){if(t._state!==Nt.states.ENABLED)return;var n=c(this._triggers[t.id][It.triggers.ON_MESSAGE],function(t){return t.payload===e.message}),r=e.trigger||this._stateManager.getStateTrigger(t.id);this.startTriggerPath(n,t,r)},handleComponentEnabled:function(e,t){t.unbind(At.events.ENABLED,this._componentEnabledCallbacks[t.id]),this.setComponentListeners(!0,t)},handleComponent:function(e,t){var n=c(this._triggers[t.id][It.triggers.COMPONENT],function(t){return t.payload===e.type&&(L.u===typeof t.criteria||L.u!==typeof e.data&&t.criteria==e.data)});if(n.length>0&&this.isStateEnabled(t)){var r=e.trigger||this._stateManager.getStateTrigger(t.id),i=new Ft(e.data,null,e);this.startTriggerPath(n,t,r,i)}},handleStageUnloaded:function(e,t){var n=this._stateManager.getStateTrigger(t.id);n=e.triggerSequence?n.clone(e.triggerSequence):n,this.startTriggerPath(this._triggers[t.id][It.triggers.STAGE_UNLOADED],t,n)},handleViewability:function(e,t,n){if(t._state!==Nt.states.ENABLED)return;if(this.isStateEnabled(t)){var r=e.trigger||this._stateManager.getStateTrigger(t.id),i=new Ft(e.info&&e.info.value,null,e);this.startTriggerPath([n],t,r,i)}},isStateEnabled:function(e){return this._stateManager.getState(e._node.id)===Nt.states.ENABLED},startTriggerPath:function(e,t,n,r){var i=this;a(e,function(e){a(e.paths,function(e){i.startPath(e,t,n,r)})})},startPath:function(e,t,n,r){var i=this,s=i.createPathActionPromises(e,t,n,r);Pt.chain(s)},createPathActionPromises:function(e,t,n,r){var i=this,s=[];s.push(function(t,i){var s=new Pt.Promise;return s.done(null,{pathKey:e,metricsHelper:n,triggerData:r}),s});var o=c(i._actions.paths[e],function(e){var t=i._actions.actions[e];return t.type&&t.type!==-1&&i["do"+t.type]});return s=s.concat(v(o,function(e){var n=i._actions.actions[e];return n.key=e,function(e,r){if(e){var s=new Pt.Promise;return s.done(e,null),s}return i["do"+n.type](n,r,t)}})),s},doloop:function(e,t,n){var r=this,i=[t.pathKey,"-",e.key].join(""),s=r._pathLoopData[i];s||(s={count:0},r._pathLoopData[i]=s),s.promise=new Pt.Promise;var o=e.payload,u=e.options||{},a=parseInt(u.count,10);return o==="forever"||!isNaN(a)&&a>0&&s.count<a?(s.promise.done("voided loop"),mt.requestAnimationFrame(function(){r.startPath(t.pathKey,n,t.metricsHelper,t.triggerData)}),s.count++):(s.count=0,s.promise.done(null,t)),s.promise},dolink:function(e,t,n){var r=t.metricsHelper,i=this._factory.getClickthroughUrl({url:e.payload,trigger:r&&r.id,component:r&&r.component,detail:e.payload,contentData:n._node.contentData}),s=e.options&&e.options.window?e.options.window:"_blank";if(s==="lightbox")return this.doexpand({payload:M,type:"lightbox",options:{config:{widget_url:i,widget_width:e.options.width||800,widget_height:e.options.height||600,widget_noScrolling:e.options.hideScrollbar}}},t,n);var o=new Pt.Promise;return i&&(this._videoManager.pauseVideos({metricsHelper:r}),this._factory.getInstance().view.openWindow(i,s)),o.done(null,t),o},doapplink:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;r.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"App Link",eventData:{url:e.payload},contentData:n._node.contentData});var s="_top";return I.mraid?this._factory.getInstance().view.openWindow(e.payload,s):Y(e.payload,s),i.done(null,t),i},dophone:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;r.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"Phone",eventData:{number:e.payload},contentData:n._node.contentData});var s="_top",o="tel:"+e.payload;return I.mraid?this._factory.getInstance().view.openWindow(o,s):Y(o,s),i.done(null,t),i},dochangevisibility:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise,s=e.options.visible==="true",o=e.payload==="self"?n.id:e.payload;this._stateManager.setState(o,s?Nt.states.ENABLED:Nt.states.DISABLED,r);var u=e.payload==="self"?n:this._factory.getContainerById(e.payload);if(u){var a=function(){i.done(null,t)},f=function(){i.done("cancelled",null)};u.visible(s,e.options.animate,a,f),u.trigger(It.events.TARGETED_ACTION)}else i.done(null,t);return i},doanimate:function(e,t,n){var r=t.metricsHelper,i=this,s=new Pt.Promise,o=e.payload==="self"?n:this._factory.getContainerById(e.payload);if(!o||!this.isStateEnabled(o))s.done(null,t);else{var u=i._factory.getAnimation(o,e.options.duration*1e3,e.options.easing.ease,this._svgPaths[e.key]),a=function(e){s.done(null,t)},f=function(e){s.done("cancelled",null)};u.cease(),u.bind(mt.events.COMPLETE,a),u.bind(mt.events.CANCELLED,f),mt.requestAnimationFrame(function(){u.run({from:e.options.from,to:e.options.to})}),o.trigger(It.events.TARGETED_ACTION)}return s},dostage:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise,s=f({stage:parseInt(e.payload,10),type:e.type,trigger:r&&r.id},e.options);return this._expansion.openStage(s),i.done(null,t),i},doexpand:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise,s=f({id:e.payload,type:e.type,trigger:r&&r.id},e.options);return this._expansion.openExpansion(s),i.done(null,t),i},dolightbox:function(e,t,n){return this.dostage(e,t,n)},doresize:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise,s=f({id:e.payload,trigger:r&&r.id},e.options);return s.mode==="close"&&(s.resizeHeight=s.height,s.width=null,s.height=.1),this._expansion.resize(s),i.done(null,t),i},dotarget:function(e,t,n){var r=t.metricsHelper,i=t.triggerData,s=new Pt.Promise,o="self"===e.payload?n:this._factory.getContainerById(e.payload);if(o&&J(o,At)&&this.isStateEnabled(o)){var u=e.options.args?[e.options.args]:[];r=r.clone(null,null,o._node.id),o.callExternalFn(e.options.fn,u,r,i),o.trigger(It.events.TARGETED_ACTION)}return s.done(null,t),s},dosendmessage:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;return this.isStateEnabled(n)&&this._messengers[n.id].send(e.payload,e.options,r),i.done(null,t),i},docloseself:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;return this._expansion.closeSelf({trigger:r&&r.id}),i.done(null,t),i},docloseexpansions:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;return this._expansion.closeExpansions({trigger:r&&r.id}),i.done(null,t),i},dotracker:function(e,t,n){var r=new Pt.Promise;return e.payload&&this._factory.getMetrics().sendTracker(e.payload),r.done(null,t),r},doshare:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;e.options=e.options||{};var s={url:e.payload,service:e.options.service,body:e.options.description,subject:e.options.title,image:e.options.image,trigger:r},o=this._factory.getShareUrl(s);return o&&(this._videoManager.pauseVideos({metricsHelper:r}),this._factory.getInstance().view.openWindow(o,"_blank")),i.done(null,t),i},doemail:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;return e.options=e.options||{},r.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"Email",eventData:{to:e.payload,subject:e.options.subject,body:e.options.body},contentData:n._node.contentData}),Y("mailto:"+e.payload+"?subject="+encodeURIComponent(e.options.subject)+"&body="+encodeURIComponent(e.options.body),"_top"),i.done(null,t),i},docalendar:function(e,t,n){var i,s=t.metricsHelper,u=new Pt.Promise;e.options=e.options||{};var a={title:e.payload,date:e.options.date};s.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"Calendar",eventData:a,contentData:n._node.contentData});var f=!0,l;if(e.options.date){l=e.options.date.split("/");if(l.length===3)for(var c=0;c<3;c++){var h=Number(l[c]);if(h<1||isNaN(h)){f=!1;break}}else f=!1}else f=!1;if(e.payload&&f)if(this._factory.getInstance().view.doCalendar){var p="T00:00",d="T23:59";i=l[2]+"-"+l[0]+"-"+l[1];var v=(new Date).getTimezoneOffset()/60,m=Math.abs(v),g=m<10?"0"+m:m;v<0?g="+"+g+":00":g="-"+g+":00";var b={description:e.payload,start:i+p+g,end:i+d+g};this._factory.getInstance().view.doCalendar(b)}else{var w;o.is.platform.android?(i=l[2]+l[0]+l[1]+"/"+l[2]+l[0]+l[1],w="http://www.google.com/calendar/event?action=TEMPLATE&text="+e.payload+"&sprop=website:"+r.URLS.runtimeCdn+"&dates="+i):w=y.getDataUrl("cal",{data:a,regId:this._factory.getInstance().getConfig().regId,appId:this._factory.getInstance().getConfig().appId}),Y(w,"_top")}return u.done(null,t),u},dojs:function(e,t,n){var r=t.metricsHelper,i=new Pt.Promise;e.options=e.options||{name:""};var s=function(e,t){var n="fjs-"+(+(new Date)).toString().substring(7,11),r=o.make("script",{doc:e,attributes:{id:n}});r.text="try { (function() { "+t+"} )(); } catch(ignored) {}; var flite_s=document.getElementById('"+n+"');if(flite_s)document.body.removeChild(flite_s);",e.body.appendChild(r)};return r.logNotation({subtype:St.subtype.NOTATION_UPDATE,detail:"Execute Javascript",eventData:{name:e.options.name},contentData:n._node.contentData}),s(o.getExpandableWindow().document,e.payload),i.done(null,t),i},dodelay:function(e,t,n){var r=new Pt.Promise,i=parseFloat(e.payload);return i=isNaN(i)?0:i,this.createTimeout(n,"action-"+e.type,function(){r.done(null,t)},i*1e3),r},dometric:function(e,t,n){var r=new Pt.Promise,i=t.metricsHelper;return L.u!=typeof e.payload&&""!==e.payload&&i.logNotation({subtype:St.subtype.NOTATION_ACTION,detail:e.payload,contentData:n._node.contentData}),r.done(null,t),r},tearDownActions:function(e){a(this._listeners[e.id],function(e){e.target.unbind(e.tactileEvent,e.callback)}),this._listeners[e.id]=[],e.unbind(Nt.events.STATE_CHANGE,this._stateChangeCallbacks[e.id]),e.unbind(At.events.ENABLED,this._componentEnabledCallbacks[e.id]),this.setComponentListeners(!1,e),this.setViewabilityListeners(!1,e),e.css("cursor","default")}},{triggers:{CLICK:"click",COMPONENT:"component",MOUSE_OUT:"mouseout",MOUSE_OVER:"mouseover",ON_MESSAGE:"onmessage",ORIENTATION_CHANGE:"orientationchange",PINCH:"pinch",SELECT:"tapclick",SHAKE:"shake",STATE_ENABLED:"stateenabled",STATE_DISABLED:"statedisabled",SWIPE:"swipe",TAP:"tap",VISIBILITY_HIDDEN:"visibilityhidden",VISIBILITY_SHOWN:"visibilityshown",ZOOM:"zoom",STAGE_UNLOADED:"stageunloaded",IN_VIEW:"inview",OUT_OF_VIEW:"outview",SCROLL:"scroll"},events:{TARGETED_ACTION:"action_targeted"}}),qt=it.extend({_instance:null,_config:null,_theme:null,_stateManager:null,_videoManager:null,_adapter:null,_metrics:null,constructor:function(e,t,n,r,i,s){this._instance=e,this._config=t,this._stateManager=n,this._videoManager=r,this._adapter=i,this._metrics=s,this._actionController=new It(this,this._config.getValue("actions")),this._theme=this._config.getValue("theme")||{}},getAdapter:function(){return this._adapter},getStateManager:function(){return this._stateManager},getVideoManager:function(){return this._videoManager},getActionController:function(){return this._actionController},getMetrics:function(){return this._metrics},getContainer:function(e,t){if(e){var n=e.component?new Mt(e,this,t):new Lt(e,this,t);return Rt.containers[e.id]=n,n}},getContainerById:function(e){return Rt.containers[e]},getPartName:function(e){var t=e.component;L.s===typeof e&&(t=e);var n=this.getComponentDefinition(t);return n&&n.partName||""},getPartConfig:function(e){var t=e.component;L.s===typeof e&&(t=e);var n=this.getComponentDefinition(t),r=n&&n.localConfig||{};return new wt(r)},getElement:function(e,t,n){return n=n||vt,e=new n(e,t),this._adapter==="edit"&&(e._setPointerEvents=function(){this.style.pointerEvents="auto"},e.enabled(!1)),e},getVideoDispatcher:function(e){return new lt(e)},getComponentDefinition:function(e){var t=qt.definitions[e];return t||(t=this._config.getValue("components")[e]||this._instance.getConfigValue("components")[e],qt.definitions[e]=t),t},getAnimation:function(e,t,n,r){return t=this._adapter!=="edit"?t:0,new mt(e,t,n,r)},getClickthroughUrl:function(e){var t=Z(e.url);return!this._adapter&&!e.url.match(/^tel\:/i)&&!e.url.match(/^sms\:/i)&&(e.contentData&&Et.decorateContentData("metrics:clickthrough",e.contentData),t=m.getClickthroughUrl(this._instance,e)),t},getShareUrl:function(e){return m.getShareUrl(this._instance,f(e,{trigger:e.trigger&&e.trigger.id,detail:e.url,component:e.trigger&&e.trigger.component}))},getExpansion:function(){return new bt(this._instance,this._adapter)},getVPAID:function(){return new Dt(this._instance)},getMessenger:function(){return new ct},getSpinner:function(){return new yt(this._theme)},getScroller:function(e,t){var n=this._theme.scrollbarOptions||{};return t=f(t,{sliderColor:X(n.sliderColor)||"#000000",trackColor:X(n.trackColor)||"#FFFFFF"}),new gt(e,t,this._instance)},getInstance:function(){return this._instance},getData:function(e){return new Tt(e,this._instance)},getIframe:function(e,t){var n=this;return t=J(t,vt)?t.dom:t,s.IFrameUtils.getIframe(function(t,r,i){var s=n.getElement(t);e.call(null,s,r,i)},t)}},{definitions:{}}),Rt=it.extend({instance:null,assets:null,components:null,mainStage:null,config:null,stateManager:null,videoManager:null,layout:null,factory:null,metrics:null,metricsHelper:null,stageId:"__MAIN__",videoId:"__VIDEO__",constructor:function(e){Rt.stage=e.stage,this.instance=e.instance},init:function(){var e=this,t=new Pt.Promise;e.config=new wt(e.instance.config,!0),f(wt.variables,e.instance.getAllVariablesMap()),e.adapter=e.config.getValue("adapter"),I.editor=e.adapter==="edit",I.studio=u(["edit","test","preview"],e.adapter),I.mraid=e.instance.supports.mraid,I.vpaid=e.instance.supports.vpaid,I.screenshot=e.config.getBoolean("screenshot"),I.mobile&&Ht.start(),I.touchPreview=e.config.getValue("adapter_mode")==="touchpreview",I.coppa=e.config.getValue("ed")&&e.config.getValue("ed").coppa==="1",e.config.getValue("theme")&&(I.nativeScroll||(I.nativeScroll=V(e.config.getValue("theme").nativeScroll))),dt.init(e.instance),e.assets=e.config.getValue("assets")||{};var n=e.config.getValue("global_assets");o.extend(e.assets,n),e.metrics=new St(e.instance,e.adapter),e.metricsHelper=new xt(e.metrics,e.instance.metrics.trigger||0),e.stateManager=new Nt(e.metricsHelper),e.stateManager.bind(Nt.events.STATE_CHANGE,K(e,e._onStateChange)),e.videoManager=new pt,e.instance.bind("destroy",K(e,function(){var e=this;try{F(),e.stateManager.setState(e.stageId,Nt.states.DISABLED),e.stateManager.setState(e.stageId,Nt.states.UNLOADED)}catch(t){}})),e.instance.view.bind("scale",function(e){dt.setZoom(e.zoom)});var r=e.config.getValue("layout"),i=e.config.getValue("components");if(e.instance.view.dataManager){var s=e.config.getValue("actions");e.instance.view.dataManager.fetchData(e.stageId,r,i,s,this.assets,I.editor).then(function(n,r,i){e.config.setValue("components",r),e.config.setValue("actions",i),e.load(n,r),t.done()})}else e.load(r,i),t.done();return t},load:function(e,t){var n=this;n.factory=new qt(n.instance,n.config,n.stateManager,n.videoManager,n.adapter,n.metrics),n.components=t,n.layout=n.walkTree(e)},walkTree:function(e,t){var n=this,r=[];return a(e,function(e){var i=f({},O,e);i.parent=t||n.stageId;if(i.visibility&&i.visibility.toLowerCase()==="disabled")return;n.stateManager.trackNode(i);var s="view";i.component&&n.factory.getComponentDefinition(i.component)&&(s=n.factory.getComponentDefinition(i.component).type.toLowerCase(),u(["registration","instance"],s)&&(s="component")),i.type=s;if(!i.thumbnail&&i.component){var l=n.factory.getComponentDefinition(i.component);G(l,"info.configParams."+x+".value")&&(i.thumbnail=o.variableReplacement(l.info.configParams[x].value,l.info.configParams))}var c=p(O);a(c,function(e){if("number"==typeof O[e]){var t=parseFloat(i[e]);isNaN(t)?i[e]=O[e]:i[e]=t}});if(i.children)if(J(i.children,Array))i.children=n.walkTree(i.children,i.id);else for(var h in i.children)i.children.hasOwnProperty(h)&&i.children[h]&&(i.children[h]=n.walkTree(i.children[h],i.id));if(i.overflow==="visible"){var d=n._calculateChildDimensions(i);i.width=d.width,i.height=d.height}Rt.nodes[i.id]=i,r.push(i)}),r},render:function(e){var t=this,n=f({},t.config.getValue("stage"),{id:t.stageId,children:{nodes:this.layout},x:e.x,y:e.y,width:e.width,height:e.height,type:"view",overflow:A.h}),r=t.config.getValue("vast");if(r&&r.video&&I.vpaid){var i=f({},r,{id:"video",label:"Vast Layer",x:-1,y:-1,width:1,height:1,component:t.videoId});qt.definitions[t.videoId]=I.vpaid._getVPAIDComponent(r),n.children.nodes=[i].concat(n.children.nodes),t.stateManager.trackNode(i)}var s=t.config.getValue("flt.preloader");if(s&&s.clickthrough){var o={id:"initialLayer",label:"Initial Layer",x:e.x,y:e.y,width:e.width,height:e.height,overflow:A.h,actions:[{trigger:"tap",payload:s.clickthrough,delay:"",options:{},type:"link"}]};n.children.nodes=[o].concat(n.children.nodes)}t.mainStage=t.factory.getContainer(n,Rt.stage),t.gesture=new ot(t.mainStage,{instance:t.instance});var u=function(){jt.checkOrientation(),t.instance.view&&t.instance.view.trigger("renderComplete")};return I.editor||t.mainStage.bind(Nt.events.LOADED,u),gt.helper.width(e.width),gt.helper.height(e.height),gt.helper.x(-e.width),gt.helper.y(-e.height),t.mainStage.addChild(gt.helper),bt.cover.width(e.width),bt.cover.height(e.height),bt.cover.x(-e.width),bt.cover.y(-e.height),bt.rect=e,t.mainStage.addChild(bt.cover),t.stateManager.trackNode(n),t.stateManager.setState(t.stageId,Nt.states.ENABLED),I.editor&&u(),t},_onStateChange:function(e){for(var t=0,n=e.branch.length;t<n;++t){var r=e.branch[t],i=this.factory.getContainerById(r),s=t<n-1?e.branch[t+1]:null;if(!i){var o=Rt.nodes[r]&&Rt.nodes[r].parent;o&&(i=this.factory.getContainerById(o),i&&(s=r,r=o))}if(!i)continue;var u={state:this.stateManager.getState(r),trigger:this.stateManager.getStateTrigger(r)};s&&(u.child={key:s,state:this.stateManager.getState(s),trigger:this.stateManager.getStateTrigger(s)}),i.stateChange(u)}},_calculateChildDimensions:function(e){var t={x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation||0};if(e.overflow&&e.overflow==="visible"&&e.children&&p(e.children).length>0){t.x=t.y=t.width=t.height=null;var n=p(e.children);a(n,function(n){var r=e.children[n];r.length>0&&a(r,function(e){var n=this._calculateChildDimensions(e),r={x:t.x,y:t.y,width:t.width,height:t.height};t.x=null!==t.x?Math.min(t.x,n.x):n.x,t.y=null!==t.y?Math.min(t.y,n.y):n.y,t.x<r.x&&(t.width+=r.x-t.x),t.y<r.y&&(t.height+=r.y-t.y),t.width=null!==t.width?Math.max(t.width,n.x+n.width-t.x):n.width,t.height=null!==t.height?Math.max(t.height,n.y+n.height-t.y):n.height},this)},this)}return t},update:function(e){var t=this,n=e&&e.id&&t.factory.getContainerById(e.id);if(n){var r=Rt.nodes[e.id],i=f({},e.properties);return r&&i.children&&t.walkTree([i],r.parent),t.instance.view.dataManager&&t.instance.view.dataManager.updateData(e.id,i),n.update(i),!0}},select:function(e){if(!this.factory)return;var t=e&&e.id&&this.factory.getContainerById(e.id),n=e&&e.id&&(t&&t._node||Rt.nodes[e.id]);if(n){var r={x:n.x,y:n.y,width:n.width,height:n.height,rotation:n.rotation||0},i=n.visibility!=="hidden",s=n;while(i&&s)i=s.visibility!=="hidden",s=s.parent&&Rt.nodes[s.parent];i&&this.stateManager.setState(e.id,Nt.states.ENABLED);if(t){var o=t.rotation();t.rotation(0);var u=t.dom.getBoundingClientRect();if(u.top||u.left||u.height||u.width)r.x=u.left,r.y=u.top,r.rotation=o;t.rotation(o);if(n.overflow&&n.overflow==="visible"&&n.children&&p(n.children).length>0){r.x=r.y=r.width=r.height=null;var f=p(n.children);a(f,function(e){var t=n.children[e];t.length>0&&a(t,function(e){var t=this.select(e),n={x:r.x,y:r.y,width:r.width,height:r.height};r.x=null!==r.x?Math.min(r.x,t.x):t.x,r.y=null!==r.y?Math.min(r.y,t.y):t.y,r.x<n.x&&(r.width+=n.x-r.x),r.y<n.y&&(r.height+=n.y-r.y),r.width=null!==r.width?Math.max(r.width,t.x+t.width-r.x):t.width,r.height=null!==r.height?Math.max(r.height,t.y+t.height-r.y):t.height},this)},this)}}return{x:parseFloat(r.x),y:parseFloat(r.y),nodeX:t&&t.x()||n.x,nodeY:t&&t.y()||n.y,width:parseFloat(r.width),height:parseFloat(r.height),rotation:parseFloat(r.rotation)}}},reload:function(e){var t=this,n=Rt.nodes[e.id],r=e&&e.id&&this.factory.getContainerById(e.id);if(r){var i=f({},e.localConfig);a(i,function(e,t){i[t]=o.variableReplacement(e,wt.variables)}),t.instance.view.dataManager&&t.instance.view.dataManager.replaceData(e.id,r,i),r.reload(i)}else if(n&&n.parent){if(n.component&&e.localConfig){var s=e.localConfig,u=this.factory.getComponentDefinition(n.component);f(u.localConfig,s);if(u.info&&u.info.configParams){var l={};for(var c in s){if(!s.hasOwnProperty(c))continue;l[c]={name:c,value:s[c]}}f(u.info.configParams,l)}}return t.reload({id:n.parent})}var h=f({},e);return n&&n.prototypeId&&(h.id=n.prototypeId),t.select(h)},click:function(e){var t=tt(e.x,e.y);if(t)return r.flashCallback("layer",t._node.id),t._node.id},setVariable:function(e){f(wt.variables,e),wt.parsedFlag=+(new Date)}},{stage:null,containers:{},nodes:{}});e.Ukitu=Rt})(window,document);