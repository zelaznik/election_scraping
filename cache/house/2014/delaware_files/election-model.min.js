function ElectionModel(a){function b(a){a||(a={}),c(a),d()}function c(a){ua.develop=a.develop||!1,ua.isSVG=a.isSVG||!1,ua.checkzeros=a.checkzeros||!1,ua.statesInfo=a.statesInfo||{},ua.stateAbbs=a.stateAbbs||[],ua.statesToCheck=[],ua.checkzeros===!0&&(ua.statesToCheck=ua.stateAbbs.slice(0)),a.selected||(a.selected={}),a.path||(a.path={}),ua.path={js:a.path.js||"/js/election/",lines:a.path.lines||"/js/election/vectors/",data:a.path.data||"/mapdata/"},ua.isHomepage=a.isHomepage||!1,ua.isMobile=!!a.isMobile&&a.isMobile,ua.isIpad=a.isIpad||!1,ua.timerDuration=a.timerDuration||30,ua.lazy=a.lazy||!1,ua.isUS=a.isUS||!1,ua.isSchedule=!!a.hasOwnProperty("isSchedule")&&a.isSchedule,ua.selected={yearDefault:a.selected.yearDefault||"2014",year:a.selected.year||"2014",yearType:a.selected.yearType||"P",yearSeason:a.selected.yearSeason||"P",race:a.selected.hasOwnProperty("race")?a.selected.race:"S",state:a.selected.state||"US",date:a.selected.date||"",party:a.selected.party||"",district:a.selected.district||"",special:!!a.selected.hasOwnProperty("special")&&a.selected.special,runoff:!!a.selected.hasOwnProperty("runoff")&&a.selected.runoff}}function d(){A(),xa=!0,Da=[],Ea=[],j(),Da.hasOwnProperty(0)||(da(ua.selected.year,ua.selected.yearType,"timestamps",!0),f("timestamps")),e()}function e(){Da.hasOwnProperty(0)?h(Da[0]):k()}function f(a){""==ua.selected.date&&"LIVE"!=a&&"US_primaries"!=a&&"US"!=a&&"CONFIG"!=a&&"CONFIG_primaries"!=a&&"timestamps"!=a||Da.push(a)}function g(a){Ea[a]=void 0,delete Ea[a]}function h(a){var b=a;"LIVE"!=a&&"US_primaries"!=a&&"US"!=a&&"CONFIG"!=a&&"CONFIG_primaries"!=a&&"timestamps"!=a&&(a=b+"_"+ua.selected.date);var c=ua.path.data+ua.selected.year,d=c+"/"+a+".xml"+ha(),f="text/plain; charset=x-user-defined",g="text";("CONFIG"==a&&"G"==ua.selected.yearType||"CONFIG_primaries"==a&&"P"==ua.selected.yearType)&&(d=c+"/"+a.toLowerCase()+".json"+ha(),f="application/json",g="json"),$.ajax({url:d,mimeType:f,dataType:g,cache:!0,error:function(a,b,c){ma("Error loading data...")},success:function(a){Ea[b]=a},complete:function(){Da.shift(),e()}})}function i(){var a,b=!0;for(a in ta)if(ta[a]===!1){b=!1;break}return b}function j(){ta={timestamps:!1}}function k(){ta.timestamps===!1?n(Ea.timestamps,"timestamps"):ta.timestamps&&Ea.hasOwnProperty("CONFIG")?o(Ea.CONFIG,"CONFIG"):ta.timestamps&&Ea.hasOwnProperty("CONFIG_primaries")?o(Ea.CONFIG_primaries,"CONFIG_primaries"):ta.timestamps&&Ea.hasOwnProperty("US_primaries")?p(Ea.US_primaries,"US_primaries"):ta.timestamps&&Ea.hasOwnProperty("US")?p(Ea.US,"US"):ta.timestamps&&Ea.hasOwnProperty("LIVE")?p(Ea.LIVE,"LIVE"):ta.timestamps&&Ea.hasOwnProperty(ua.selected.state)?p(Ea[ua.selected.state],ua.selected.state):Da.hasOwnProperty(0)?e():Da.hasOwnProperty(0)||1!=i()||(A(),l())}function l(){xa=!1,va?la("dataLoaded"):la("initComplete",["model"])}function m(){va=!0}function n(a,b){if(void 0!==a){var c,d,h,i,j,k,l,m=ua.selected.year,n=ua.selected.yearType,o=a.split(/\r\n|\r|\n/),p=ea($.trim(o[0].split("|")[1]));for(Ca[m][n][b].loaded=p,Ca[m][n][b].needData=!0,Ga=p,c=1;c<o.length;c++)d=o[c],""!=d&&(h=d.split("|"),i=$.trim(h[0]),j=ea($.trim(h[1])),k=m+"_"+n+"_"+i,Ca[m].hasOwnProperty(n)&&(Ca[m][n].hasOwnProperty(i)?(l=Ca[m][n][i].loaded,(j.getTime()!=l.getTime()&&!ua.isIpad&&!ua.isHomepage&&!ua.isMobile||"LIVE"==i&&(ua.isIpad||ua.isHomepage||ua.isMobile))&&("US"!=i&&"US_primaries"!=i&&i==ua.selected.state||"LIVE"==i&&(ua.isUS||ua.isHomepage||ua.isIpad||ua.isMobile))&&(Ca[m][n][i].needData=!0,f(i))):i==ua.selected.state&&!ua.isUS&&!ua.isIpad&&!ua.isHomepage&&!ua.isMobile&&"US"!=i||"US"==i&&"G"==n&&ua.isUS&&!ua.isIpad&&!ua.isHomepage&&!ua.isMobile||"US_primaries"==i&&"P"==n&&ua.isUS&&!ua.isIpad&&!ua.isHomepage&&!ua.isMobile||"CONFIG"==i&&"G"==n||"CONFIG_primaries"==i&&"P"==n?(da(m,n,i,!0),f(i)):da(m,n,i,!0)));ta.timestamps=!0}g(b),e()}function o(a,b){var c=!1;if(void 0!==a){if(Ba=a,Ba.hasOwnProperty("timestamp")){var d=ua.selected.year,h=ua.selected.yearType,i=ea($.trim(Ba.timestamp));Ca[d][h][b].loaded=i,Ca[d][h][b].needData=!1}Ba.hasOwnProperty("livedate")&&na(),c=!0}c&&(ta[b]=!0),g(b),(wa||ua.isSchedule)&&(ua.isUS||ua.isHomepage||ua.isIpad||ua.isMobile)?(da(ua.selected.year,ua.selected.yearType,"LIVE",!0),f("LIVE"),e()):k()}function p(a,b){var c=!1;if(void 0!==a){var d=ua.selected.year,e=ua.selected.yearType,f=a.split(/\r\n|\r|\n/),h=Ca[d][e][b].loaded,i=ea($.trim(f[0].split(";")[2]));h.getTime()!=i.getTime()?Ca[d][e][b].needData=!0:Ca[d][e][b].needData=!1,Ca[d][e][b].loaded=i,q(f[1],d,e),"US"!=b&&"LIVE"!=b||"G"!=ua.selected.yearSeason||"G"!=e||1==f[2].split("|").length||y(f[2],d,e);var j,l,m,n;for(j=3;j<f.length;j++)l=f[j],""!=l.replace(/\s*/g,"")&&(m=r(d,l),s(d,m),m.officeID&&(n=u(d,m,l),v(m,n.raceVotes,n.numCandidates),w(d,m),x(d,m,l)));c=!0}c&&(ta[b]=!0),g(b),k()}function q(a,b,c){if("undefined"!=typeof a){Ha.hasOwnProperty(b)||(Ha[b]={}),Ha[b].hasOwnProperty(c)||(Ha[b][c]={});var d,e,f=a.split("|");for(e=0;e<f.length;e++){d=f[e];var g=d.split(";"),h=g[0],i=$.trim(g[1]),j=$.trim(g[2]),k=g[3];Ha[b][c][h]=new C(h,i,j,k)}}}function r(a,b){var c=b.split("||")[0].split(";"),d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i="X"==c[5],j=parseFloat(c[6]),k="X"==c[7],l=parseFloat(c[8]);(l==-1||isNaN(l))&&(l=0);var m=parseInt(c[9],10);(m==-1||isNaN(m))&&(m=0);var n=!1,o=!1,p=!1;c.hasOwnProperty(10)&&(n="X"==c[10]),c.hasOwnProperty(11)&&(o="X"==c[11]),c.hasOwnProperty(12)&&(p="X"==c[12]),m=d+m;return"H"==e&&(g=parseInt(h,10)),new D(d,e,f,g,h,i,j,k,l,m,n,o,p)}function s(a,b){var c=b.stateAbb,d=b.fips,e=c+d,f=b.officeID,g=b.raceTypeID,h=(b.raceNum,b.raceNum),i=b.subunitName,j=b.homepagePick;Ia.hasOwnProperty(a)||(Ia[a]={},isNewRace=!0),Ia[a].hasOwnProperty(c)?Ia[a][c].hasHomepagePicks||(Ia[a][c].hasHomepagePicks=j):(Ia[a][c]={},Ia[a][c].hasHomepagePicks=j,isNewRace=!0),Ia[a][c].hasOwnProperty(e)||(Ia[a][c][e]={},isNewRace=!0),Ia[a][c][e].hasOwnProperty(f)||(Ia[a][c][e][f]={},isNewRace=!0),Ia[a][c][e][f].hasOwnProperty(g)||(Ia[a][c][e][f][g]={},isNewRace=!0),Ia[a][c][e][f][g].hasOwnProperty(h)||(Ia[a][c][e][f][g][h]={},isNewRace=!0),Ia[a][c][e].subunitName=i,Ia[a][c][e].fips=d,Ia[a][c][e][f][g][h]=b}function u(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c.split("||")[1].split("|"),q=(b.stateAbb,b.officeID,b.raceTypeID,b.fips),r=b.precinctsPercent,s=b.raceNum,t=q>999,u=0,v={};for(raceVoteDataIndex=0;raceVoteDataIndex<p.length;raceVoteDataIndex++)o=p[raceVoteDataIndex],u++,d=o.split(";"),e=d[0],f=d[1],g=parseFloat(d[2]),h=parseFloat(d[3]),i="X"==d[4],j="X"==d[5],k="X"==d[6],l=parseFloat(d[7]),m=parseInt(d[8],10),n="R"==d[4]&&!t,(l==-1||isNaN(l))&&(l=0),v[e]=new E(e,f,g,h,i,j,k,l,m,n,s,r);return{raceVotes:v,numCandidates:u}}function v(a,b,c){a.raceVotes=b,a.numCandidates=c}function w(a,b){var c,d,e=b.stateAbb,f=b.officeID,g=b.raceTypeID,h=b.fips,i=e+h,j=(b.raceNum,b.raceNum),k=h>999,l=!1,m=!1,n=Ia[a][e][i][f][g][j].raceVotes;for(d in n)c=n[d],(c.votecount>0||c.votepercent>0||1==c.winner&&!k)&&(l=!0),c.politicoPick&&(m=!0);Ia[a][e][i][f][g][j].hasResults=l,Ia[a][e][i][f][g][j].hasPicks=m,za.hasOwnProperty(f)||(za[f]=!1),za[f]||(za[f]=l)}function x(a,b){var c=b.stateAbb,d=b.officeID,e=b.raceTypeID,f=parseInt(b.fips,10),g=c+f,h=(b.raceNum,b.raceNum),i=f>999,j=1==b.numCandidates,k=b.raceVotes,l=(b.precinctsPercent,!1),m=!1,n="",o=0;if(i){var p,q,r;for(r in k)if(p=k[r],0!=p.votecount||0!=p.votepercent||p.winner&&j){q=!0;break}if(q)for(r in k)p=k[r],p.winner&&j&&(l=!0),p.votecount>=o&&(o=p.votecount,n=p.party)}else{var s,t;for(t in k)s=k[t],s.winner&&(s.winner=!0,l=!0,n=s.party,o=s.votecount),s.runoff&&(m=!0,o=s.votecount)}Ia[a][c][g][d][e][h].hasRunoff=m,Ia[a][c][g][d][e][h].hasWinner=l,Ia[a][c][g][d][e][h].winningParty=n}function y(a,b,c){if(""!=a){a=a.split("||");var d,e,f,g,h,i,j,k=["P","S","H","G"],l=["D","I","R"],m=["total","gained","lost","net"],n=0,o=0;for(Ia.hasOwnProperty(b)||(Ia[b]={}),Ia[b].hasOwnProperty("bop")||(Ia[b].bop={}),n;n<k.length;n++)if(o=0,d=k[n],e=a[n],Ia[b].bop.hasOwnProperty(d)||(Ia[b].bop[d]={}),"P"==d)for(f=e.split(";"),o;o<l.length;o++)g=l[o],Ia[b].bop[d][g]=parseInt(f[o],10);else for(h=e.split("|"),j=0,o;o<l.length;o++)for(g=l[o],"undefined"==typeof h&&ma(h),f=h[o].split(";"),t=0,t;t<m.length;t++)i=m[t],Ia[b].bop[d].hasOwnProperty(g)||(Ia[b].bop[d][g]={}),Ia[b].bop[d][g].hasOwnProperty(i)||(Ia[b].bop[d][g][i]={}),Ia[b].bop[d][g][i]=parseInt(f[t])}}function z(){clearTimeout(sa)}function A(){clearTimeout(sa),ua.selected.year==ua.selected.yearDefault&&wa&&(ya=0,B())}function B(){ya!=ua.timerDuration?(ya+=1,sa=setTimeout(B,1e3)):(ya=0,d())}function C(a,b,c,d){if("No Votes"==c&&"Uncommitted"==b&&(c="",b="Uncommitted"),"None of these candidates"!=b&&"None of these candidates"!=c||(b="None of these candidates",c=""),null!=c&&null!=b){c==b&&(c="");var e=c.split(" ");e[e.length-1]==b&&e.length>1&&(b="")}this.id=a,this.firstName=c,this.lastName=b,this.url=d}function D(a,b,c,d,e,f,g,h,i,j,k,l,m){this.stateAbb=a,this.officeID=b,this.raceTypeID=c,this.fips=d,this.subunitName=e,this.homepagePick=f,this.precinctsPercent=parseFloat(g),this.politicoPick=h,this.ev=parseInt(i,10),this.raceNum=String(j),this.raceVotes={},this.hasResults=!1,this.hasPicks=!1,this.special=k,this.runoff=l,this.recall=m}function E(a,b,c,d,e,f,g,h,i,j,k,l){this.candID=a,this.party=b,this.votecount=parseInt(c,10),this.votepercent=parseFloat(d),this.winner=e,this.politicoPick=f,this.incumbent=g,this.ev=parseFloat(h),this.order=parseInt(i,10),this.runoff=j,this.raceNum=String(k),this.precinctsPercent=parseFloat(l)}function F(a,b,c){c="All",b="All",returned={};return Ia.hasOwnProperty(a)&&Ia[a].hasOwnProperty("bop")&&("All"==b?returned=Ia[a].bop:Ia[a].bop.hasOwnProperty(b)&&("All"==c?returned=Ia[a].bop[b]:Ia[a].bop[b].hasOwnProperty(c)&&(returned=Ia[a].bop[b][c]))),returned}function G(a){var b=fa(a);return I(b)}function H(a,b,c){var d="",e=a.stateAbb;if(Aa.hasOwnProperty(e))d=Aa[e];else{var f=fa(a.pollclosing);d=J(b,c,f)}return d}function I(a){a=a||Ga;var b=K(a,!0,!0),c=b.month<10?"0"+String(b.month):b.month,a=b.date<10?"0"+String(b.date):b.date,d=b.year+"-"+c+"-"+a,e=b.hours+":"+b.minutes+":"+b.seconds;return d+"T"+e+"-05:00"}function J(a,b,c){c=c||Ga;var d="",e="",f="",g=K(c,!1,!1);return a&&(f=g.month+"/"+g.date+"/"+g.year+(b?" ":"")),b&&(e=g.hours+":"+g.minutes+" "+g.amOrpm),d=f+e}function K(a,b,c){var d=a.getFullYear()-(b?0:2e3),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds(),j="AM ET";return g>11&&(j="PM ET"),g>12&&!c?g-=12:0!=g||c||(g=12),h<10&&(h="0"+String(h)),i<10&&(i="0"+String(i)),{year:d,month:e,date:f,hours:g,minutes:h,seconds:i,amOrpm:j}}function L(a,b,c,d,e,f){var g,h,i,j,k,l,m={},n=0,o=0,p=c+d;if(Ia.hasOwnProperty(a)&&Ia[a].hasOwnProperty(c)&&Ia[a][c].hasOwnProperty(p)&&Ia[a][c][p].hasOwnProperty(e)){for(o=0;o<f.length;o++)g=f[o].raceType,i=f[o].raceNum,j=c+i,k=f[o].special,l=f[o].runoff,h=g+(k?"S":"")+(l?"R":""),Ia[a][c][p][e].hasOwnProperty(g)&&Ia[a][c][p][e][g].hasOwnProperty(j)&&(i==Ia[a][c][p][e][g][j].raceNum&&(m.hasOwnProperty(n)?m[n].hasOwnProperty(g)&&(n++,m[n]={fips:d}):m[n]={fips:d}),m[h]=Ia[a][c][p][e][g][j]);m.hasOwnProperty(n)&&n++}return m}function M(a,b,c,d,e,f){var g,h,i,j,k,l,m,n=[],d=1,o=60,p=0,q=0;if(Ia.hasOwnProperty(a)&&Ia[a].hasOwnProperty(c))for(d;d<o;d++)if(h=c+d,Ia[a][c].hasOwnProperty(h)&&Ia[a][c][h].hasOwnProperty(e))for(q=0;q<f.length;q++)g=f[q].raceType,("G"==g&&"G"==b||"G"!=g&&"P"==b||ua.isUS)&&(j=f[q].raceNum,k=c+j,l=f[q].special,m=f[q].runoff,i=g+(l?"S":"")+(m?"R":""),Ia[a][c][h][e].hasOwnProperty(g)&&Ia[a][c][h][e][g].hasOwnProperty(k)&&(n.push(Ia[a][c][h][e][g][k]),p++));return n}function N(a,b,c,d,e,f){var g,h,i,j,k,l,m,n=[],d=1e3*parseInt(d)+1,o=d+999,p=0,q=0;if(Ia.hasOwnProperty(a)&&Ia[a].hasOwnProperty(c))for(d;d<o;d++)if(h=c+d,Ia[a][c].hasOwnProperty(h)&&Ia[a][c][h].hasOwnProperty(e)){for(q=0;q<f.length;q++)g=f[q].raceType,("G"==g&&b==g||"G"!=g&&"P"==b)&&(j=f[q].raceNum,k=c+j,l=f[q].special,m=f[q].runoff,i=g+(l?"S":"")+(m?"R":""),Ia[a][c][h][e].hasOwnProperty(g)&&Ia[a][c][h][e][g].hasOwnProperty(k)&&j==Ia[a][c][h][e][g][k].raceNum&&(n.hasOwnProperty(p)?n[p].hasOwnProperty(g)&&(p++,n[p]={fips:d}):n[p]={fips:d},n[p][i]=Ia[a][c][h][e][g][k]));n.hasOwnProperty(p)&&p++}return n}function O(a,b,c,d){a="string"==typeof a?a:ua.selected.year,b=qa(b)?b:[],d="boolean"==typeof d&&d;var e,f,g,h,i,j,k,l,m,n=[],o=0;if(Ia.hasOwnProperty(a)&&b.length>0)for(m=0;m<b.length;m++)if(e=b[m],f=e.stateAbb,k=e.officeID,raceType=e.raceType,l=e.raceNum,h=null==c?e.fips:c,Ia[a].hasOwnProperty(f))for(d?(g=parseInt(ua.statesInfo[f].fips+"000",10),h=g,i=h+999):(g=h,i=g),h;h<=i;h++)j=h==g&&d?f+0:f+h,Ia[a][f].hasOwnProperty(j)&&Ia[a][f][j].hasOwnProperty(k)&&Ia[a][f][j][k].hasOwnProperty(raceType)&&Ia[a][f][j][k][raceType].hasOwnProperty(l)&&(n[o]={fips:h,raceType:raceType,config:e,data:Ia[a][f][j][k][raceType][l]},o++);return n}function P(a,b,c,d,e,f){a="string"==typeof a?a:ua.selected.year,b="string"==typeof b?b:ua.selected.yearType,c="string"==typeof c?c:"All",d="string"==typeof d?d:"All",f=qa(f)?f:[];var g;"H"==c||"All"==c?g=ua.statesInfo[d].numDistricts2012:e>999&&(g=ua.statesInfo[d].fips+999);var h,i,j,k=[],l=0,m=0;j="All"==c?["P","S","H","G","I","L","M"]:[c];var n,d,o=0,p="US"==d||"All"==d?ua.stateAbbs:[d],q=0;if(Ia.hasOwnProperty(a)&&f.length>0)for(q;q<p.length;q++)if(d=p[q],Ia[a].hasOwnProperty(d))for(e;e<=g;e++)if(fipsStr=d+e,Ia[a][d].hasOwnProperty(fipsStr))for(o=0;o<j.length;o++)if(n=j[o],Ia[a][d][fipsStr].hasOwnProperty(n))for(m=0;m<f.length;m++)i=f[m].raceType,h=f[m].raceNum,Ia[a][d][fipsStr][n].hasOwnProperty(i)&&Ia[a][d][fipsStr][n][i].hasOwnProperty(h)&&(k[l]=Ia[a][d][fipsStr][n][i][h],l++);return k}function Q(a){var b,c,d=[],e=0,f=0,g=[],h=[],i=[],j=[],k=["P","S","H","G","I","L","M"];for(e;e<a.length;e++)if(b=a[e],b.special&&b.runoff)i.push(b);else if(b.special)g.push(b);else if(b.runoff)h.push(b);else for(f=0;f<k.length;f++)c=k[f],c==b.officeID&&(j.hasOwnProperty(f)||(j[f]=[]),j[f].push(b));for(f=0;f<k.length;f++)j.hasOwnProperty(f)&&d.push(j[f]);return d.push(i),d.push(g),d.push(h),d}function R(a){var b={};return Ba.races.hasOwnProperty(a)&&(b=Ba.races[a]),b}function S(a,b,c,d,e,f,g,h,i,j,k){a="string"==typeof a?a:ua.selected.year,b="string"==typeof b?b:ua.selected.yearSeason,c="string"==typeof c?c:ua.selected.yearType,d="string"==typeof d?d:["All"],e="string"==typeof e?e:"All",f="string"==typeof f?f:"All",g="boolean"==typeof g?g:"All",h="boolean"==typeof h?h:"All",i="boolean"==typeof i?i:"All",j="boolean"==typeof j?j:"All",k="boolean"==typeof k?k:"All";var l,m=[];l="LIVE"==d?Ba.livedate:[d];var n,o,p,q,r,s,t,u,v,w,x="US"==f||"All"==f||""==f?ua.stateAbbs:[f],y=0;for(y;y<x.length;y++)if(f=x[y],Ba.calendar.hasOwnProperty(f)){s=Ba.calendar[f];for(r in s){for(t=!1,w=0;w<l.length;w++)if(u=l[w],u==r||"All"==u){t=!0;break}if(t)for(q=s[r],v=0;v<q.length;v++)n=q[v],o=Ba.races[n],p=o.raceType,o.hasOwnProperty("homepagePick")||(j="All"),o.hasOwnProperty("politicoPick")||(k="All"),Ba.races.hasOwnProperty(n)&&(p!=c&&("G"==p||"P"!=c)||o.officeID!=e&&"All"!=e&&""!=e||o.special!=g&&"All"!=g||o.runoff!=h&&"All"!=h||o.homepagePick!=j&&"All"!=j||o.politicoPick!=k&&"All"!=k||m.push(o))}}return m}function T(a,b,c,d){var e,f,g,h,i="undefined"==typeof a||"US"==a?"All":a,j="undefined"==typeof b||""==b?"All":b,k=[],l=0,m=0,n=0,o=[];if(h="All"==i?ua.stateAbbs:[i],Ba.livedate.length>0)for(l;l<Ba.livedate.length;l++)for(e=Ba.livedate[l],m=0;m<h.length;m++)if(a=h[m],Ba.calendar.hasOwnProperty(a)&&Ba.calendar[a].hasOwnProperty(e))for(o=Ba.calendar[a][e],n=0;n<o.length;n++)g=o[n],Ba.races.hasOwnProperty(g)&&(f=Ba.races[g],f.officeID!=j&&"All"!=j||f.stateAbb!=i&&"All"!=i||k.push(f));return k}function U(a,b,c,d){var e="";switch(b){case"D":e="primary";break;case"R":e="primary";break;case"I":e="primary";break;case"O":e="primary";break;case"E":e="primary";break;case"S":e="primary";break;case"G":e="general"}return e+=c===!0?"-special":"",e+=d===!0?"-runoff":""}function V(a){if(Ba.calendar.hasOwnProperty(a)){var b,c,d,e,f,g,h,i,j,k,l=Ba.calendar[a],m={},n={};for(c in l)for(b=l[c],k=0;k<b.length;k++)d=b[k],e=Ba.races[d],g=e.officeID,h=e.raceType,i=e.special,j=e.runoff,f=U(g,h,i,j),""!=f&&(m.hasOwnProperty(g)||(m[g]=[],n[g]={}),n[g].hasOwnProperty(c)||(n[g][c]={}),n[g][c].hasOwnProperty(f)||(n[g][c][f]={},m[g].push(e)))}return m}function W(a,b,c,d,e,f,g){var h,i,j=[],k=[],l=[],m=[];for(h in a)if(i=a[h],b==i.raceNum||isNaN(i.raceNum)){var n={candID:i.candID,lastName:_(i.candID,c,d),sortNum:i.order};f?j.push(n):g?g&&(i.incumbent?m.push(n):i.politicoPick&&i.order>0?l.push(n):j.push(n)):i.incumbent?m.push(n):j.push(n)}var o=0;if(m.length>0)for(m.sort(function(a,b){var c=a.lastName,d=b.lastName;return c<d?-1:c>d?1:0}),o;o<m.length;o++)k.push(a[m[o].candID]);var p=0;if(l.length>0)for(l.sort(function(a,b){return a.sortNum-b.sortNum}),p;p<l.length;p++)k.push(a[l[p].candID]);j.length>0&&j.sort(function(a,b){var c=a.lastName,d=b.lastName;return c<d?-1:c>d?1:0});var q,r;for(r in j)q=j[r],k.push(a[q.candID]);return k}function X(a,b,c,d){d="undefined"!=typeof d&&d;var e,f,g=a.raceVotes,h=a.raceNum,i=[],j=[],k=[],l={},m=0,n=[],o=[];for(f in g)e=g[f],e.winner&&!d?o.push(e):e.runoff&&!d?o.push(e):e.votecount>0?j.push(e):e.votepercent>0?k.push(e):(m++,l[e.candID]=e);if(m>0&&(n=W(l,h,b,c,a.numCandidates,a.hasResults,a.hasPicks)),j.length>0&&(j=j.sort(function(a,b){return b.votecount-a.votecount})),k.length>0&&(j=j.concat(k.sort(function(a,b){return b.votepercent-a.votepercent}))),i=j.concat(n),o.length>0){o=o.sort(function(a,b){return b.votecount-a.votecount}),i=o.concat(i)}return i}function Y(a,b,c){var d="";return Ha.hasOwnProperty(b)&&Ha[b].hasOwnProperty(c)&&Ha[b][c].hasOwnProperty(a)&&(d=Ha[b][c][a]),d}function Z(a,b,c){var d="",e=Y(a,b,c);return e&&(d=e.firstName.charAt(0)),d}function _(a,b,c){var d="",e=Y(a,b,c);return e&&(d=e.lastName),d}function aa(a){var b="";return Ja.hasOwnProperty(a)&&(b=Ja[a]),b}function ba(a,b,c){var d=!1;return Ia.hasOwnProperty(a)&&Ia[a].hasOwnProperty(c)&&Ia[a][c].hasHomepagePicks&&(d=Ia[a][c].hasHomepagePicks),d}function ca(a,b,c){var d=!1;return Ca.hasOwnProperty(a)&&Ca[a].hasOwnProperty(b)&&Ca[a][b].hasOwnProperty(c)&&Ca[a][b][c].needData&&(d=!0),d}function da(a,b,c,d){Ca.hasOwnProperty(a)||(Ca[a]={}),Ca[a].hasOwnProperty(b)||(Ca[a][b]={}),Ca[a][b].hasOwnProperty(c)||(Ca[a][b][c]={},Ca[a][b][c].loaded=Fa,Ca[a][b][c].needData=d)}function ea(a){var b=a.split("'")[1].split(" ")[0],c=a.split("'")[1].split(" ")[1].split("'")[0],d=parseInt(b.split("-")[0],10),e=parseInt(b.split("-")[1]-1,10),f=parseInt(b.split("-")[2],10),g=parseInt(c.split(":")[0],10),h=parseInt(c.split(":")[1],10),i=parseInt(c.split(":")[2].split(".")[0],10),j=0;return new Date(d,e,f,g,h,i,j)}function fa(a){return ea("{ts '"+a+"'}")}function ga(a){var b="",c=["January","February","March","April","May","June","July","August","September","October","November","December"];return c.hasOwnProperty(a)&&(b=c[a]),b}function ha(){var a="",b=new Date,c=60*Math.ceil(b.getUTCSeconds()/60),d=b.getUTCMonth().toString()+b.getUTCDate().toString()+b.getUTCFullYear().toString()+b.getUTCHours().toString()+b.getUTCMinutes().toString()+c.toString();return a="?cachebuster="+d}function ia(a,b){var c="";if(10<a&&a<14)c="th";else switch(a%10){case 1:c="st";break;case 2:c="nd";break;case 3:c="rd";break;default:c="th"}return c="html"==b?a+"<sup>"+c+"</sup>":a+c}function ja(a){return a.toString().search(/\./)>-1?a.toString():a.toString()+".0"}function ka(a){for(var b=a.toString().split("."),c=b.length>1?b[1].toString():"",d=b[0];/(-?[0-9]+)([0-9]{3})/.test(d);)d=d.replace(/(-?[0-9]+)([0-9]{3})/,"$1,$2");return d+(c?"."+c:"")}function la(a,b){$(window).trigger({type:a,params:b})}function ma(a){la("debug",["::MODEL:"+a])}function na(){if(Ba.livedate.length>0){var a,b,c=[];c=qa(ua.selectedDate)?ua.selected.date:[ua.selected.date];var d,e=0;for(e;e<Ba.livedate.length;e++){for(b=Ba.livedate[e],d=0;d<c.length;d++)if(a=c[d],a==b){wa=!0;break}if(wa)break}}}function oa(a){ua.isIpad||ua.isHomepage||ua.isMobile||(ua.selected.state=a)}function pa(a){ua.isIpad||ua.isHomepage||ua.isMobile||(ua.selected.date=a)}function qa(a){var b=!1;return"undefined"!=typeof a&&(b="[object Array]"===Object.prototype.toString.call(a)),b}function ra(){z();var a,b,c,e,f,g,h,i,j,k={},l=[],m=[],n=[],o=[],p=ua.selected.yearType;for(a in Ia)for(b in Ia[a])if("bop"!=b)for(c in Ia[a][b])if("hasHomepagePicks"!=c)for(e in Ia[a][b][c])if("fips"!=e&&"subunitName"!=e)for(f in Ia[a][b][c][e])if("G"==p&&f!=p||"G"!=p&&"G"==f)l.push(Ia[a][b][c][e][f]);else for(g in Ia[a][b][c][e][f])if(h=Ia[a][b][c][e][f][g],k.hasOwnProperty(e)||(k[e]=[]),k[e].push(h),0!==parseInt(h.precinctsPercent,10)||h.hasWinner!==!1||h.hasRunoff!==!1||""!==h.winningParty)m.push(h);else for(i in h.raceVotes)j=h.raceVotes[i],""===j.party&&"I"!=e&&n.push({raceVote:j,race:h}),0===parseInt(j.votecount,10)&&0===parseInt(j.votepercent,10)&&j.winner===!1&&j.runoff===!1||o.push({raceVote:j,race:h});ua.develop&&(console.log("------------------------------- Analysis Complete "+ua.selected.state+" -------------------------------"),Ia[ua.selected.year].hasOwnProperty("bop")&&console.log("Balance Of Power:",Ia[a].bop),l.length>0&&console.log("Found Wrong Race Type:",l),m.length>0&&console.log("Found Race with Non-Zeros:",m),o.length>0&&console.log("Found RaceVote with Non-Zeros:",o),n.length>0&&console.log("Found Candidate without a Party:",n)),Ia={},ua.statesToCheck.hasOwnProperty(0)&&(ua.selected.state=ua.statesToCheck.shift(),d())}var sa,ta,ua={},va=!1,wa=!1,xa=!1,ya=0,za={},Aa={AK:"11:00 PM/MIDNIGHT/1:00 AM ET* (Nov. 5)",AL:"7:00/8:00 PM ET",AZ:"9:00/10:00 PM ET",FL:"7:00/8:00 PM ET",ID:"10:00/11:00 PM ET",IN:"6:00/7:00 PM ET",KS:"8:00/9:00 PM ET",KY:"6:00/7:00 PM ET",MI:"8:00/9:00 PM ET",NH:"7:00/7:30/8:00 PM ET",OR:"10:00/11:00 PM ET",TX:"8:00/9:00 PM ET"},Ba={timestamp:"{ts '1000-01-01 00:00:01'}",livedate:[],calendar:{},races:{}},Ca={},Da=[],Ea=[],Fa=new Date(1900,0,1),Ga=new Date(1900,0,1),Ha={},Ia={},Ja={ACP:"A Connecticut Party",AFP:"American Freedom",AGN:"Against",AHP:"American Heritage",AIP:"American Independent",AKI:"Alaskan Independence",AMC:"American Constitution",AME:"Americans Elect",AMF:"America First",AMI:"American Indian",AMP:"America's Party",AMR:"American Party",AMS:"Americans",AO:"All Others",ATP:"American Third Position",BEP:"Blue Enigma Party",BLD:"Builders Party",BOT:"Boston Tea",BUC:"Buchanan Reform",CAM:"Constitutional Americans",CC:"Concerned Citizens",CEN:"Centrist Party",CF:"Citizens First",CIP:"Connecticut Independent Party",CM:"Cool Moose",CMT:"Communist",CNL:"Constitutional Government",CNP:"Concerns Of People",CON:"Conservative",CRK:"Politicians Are Crooks",CST:"Constitution",CTL:"CT For Lieberman",DAS:"Descendants Of American Slaves",DCG:"DC Statehood Green",DEM:"Democrat",EFP:"Earth Federation",EPF:"Ecology Party Of FL",FAA:"Fair",FDL:"Fair Deal",FEP:"Free Energy",FOR:"For",FRE:"Freedom",FRU:"Friends United",FSB:"Farmers and Small Business",FSO:"Freedom Socialist",FVP:"Family Values Party",GNW:"Greens No To War",GOP:"Republican",GRN:"Green",GRP:"Grass Roots",HCP:"Healthcare Party",HP:"Home Protection",HQ8:"Heartquake 08",IAP:"Independent American",IF:"Independent Fusion",IG:"Independent Grassroots",IGR:"Independent Green",ILS:"Illinois Solidarity",IND:"Independent",INP:"Independence",INR:"Independent Reform",INT:"Integrity Party",IP:"Independent Party",IPD:"Independent Party Of De",IPH:"Independent Party Of Hawaii",ISC:"Independent Save Our Children",IX:"Illinois Green",JP:"Justice Party",JS:"Jesus Party",LBL:"Liberal",LBP:"Looking Back",LEC:"Liberty,ecology,community",LFM:"Labor And Farm",LIB:"Libertarian",LMJ:"Legalize Marijuana",LTP:"Louisiana Taxpayers Party",LUN:"Liberty Union",LUP:"Liberty Union/progressive",MDE:"Moderate Democrat",MIP:"Maryland Independent Party",MJP:"Marijuana Party",MML:"Make Marijuana Legal",MNT:"Mountain Party",MOD:"Moderate",MRP:"Marijuana Reform",NAL:"New Alliance",NEB:"Nebraska",NEW:"New",NLP:"Natural Law",NMI:"New Mexico Independent Party",NNT:"No New Taxes",NO:"No",NON:"None Of The Above",NP:"Non Partisan",NPA:"No Party Affiliation",NPD:"No Party Designation",OBJ:"Objectivist",ONE:"One Earth",OTE:"128 District",OTH:"Other",PAC:"Pacific",PAG:"Pacific Green",PAT:"Patriot Party",PCF:"Pacifist",PCH:"Personal Choice",PEC:"Petitioning Candidate",PFP:"Peace and Freedom",PIP:"Puerto Rican Independence",PJP:"Peace and Justice Party",PLC:"Pro-life Conservative",PLP:"Progressive Labor Party",PNP:"New Progressive",POP:"Populist",PPD:"Popular Democratic",PPO:"Peace Party Of Oregon",PRG:"Progressive",PRO:"Prohibition",PRT:"Preserve Our Town",PSL:"Socialism and Liberation",PTC:"Property Tax Cut",PWF:"Protect Working Families",RES:"Resource",RFC:"Randolph For Congress",RJF:"Restore Justice-freedom",RM:"Reform Minnesota",RP:"Reform",RPM:"Republican Moderate",RTL:"Right To Life",SCC:"School Choice",SCL:"Socialism",SEP:"Socialist Equality",SM:"Save Medicare",SOC:"Socialist",SPU:"Socialist Usa",Sta:"Statehood Party",SWP:"Socialist Workers",TBD:"To Be Determined",TBL:"The Better Life",TCN:"Tax Cuts Now",TEA:"Tea Party",TLM:"Term Limits",TS:"Timesizing.com Party",UCZ:"United Citizens",UNA:"Unaffiliated",UNI:"United Independent",UNP:"United Pacifists",UNR:"Unenrolled",UNT:"United Party",UST:"U.S. Taxpayers",UTY:"Unity",VET:"Veterans Party Of America",WCP:"Working Class",WF:"Working Families",WLG:"Worker's League",WRI:"Write-In",WSN:"West Side Neighbors",WTP:"We The People",WW:"Workers World",WYC:"Wyoming Country Party",YES:"Yes"};return b(a),{tasksComplete:m,checkZeros:ra,loadData:d,needData:ca,getBalanceOfPower:F,getPollsClosingText:H,getPollsClosingHTMLTimestamp:G,getLastUpdatedText:J,getLastUpdatedHTMLTimestamp:I,getSpecificRace:L,getRaces:P,getRacesByRaceNums:O,getCountyRaces:N,getDistrictRaces:M,getRaceNums:S,getRaceNumConfig:R,getScheduleByStateAbb:V,getSortedRaceVotesByVoteCount:X,getCandidateFirstIntial:Z,getCandidateLastName:_,getCandidate:Y,getPartyName:aa,cacheBuster:ha,setSelectedState:oa,setSelectedDate:pa,getSelectedDate:function(){return ua.selected.date},getLiveRaces:T,regroupRaceNums:Q,getMonthNameByNum:ga,stateHasHomepagePicks:ba,formatNumberNthName:ia,formatNumberDecimal:ja,formatNumberCommas:ka,isArray:qa,isLive:function(){return wa},officeHasResults:function(a){return za[a]}}}function modelLoadComplete(){}